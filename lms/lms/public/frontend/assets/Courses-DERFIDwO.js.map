{"version":3,"file":"Courses-DERFIDwO.js","sources":["../../../../frontend/src/pages/Courses.vue"],"sourcesContent":["<template>\n\t<div v-if=\"courses.data\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\tclass=\"h-7\"\n\t\t\t\t:items=\"[{ label: __('Courses'), route: { name: 'Courses' } }]\"\n\t\t\t/>\n\t\t\t<div class=\"flex space-x-2 justify-end\">\n\t\t\t\t<div class=\"w-36\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\t\t@input=\"courses.reload()\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<Search class=\"w-4 h-4 stroke-1.5 text-gray-600\" name=\"search\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</div>\n\t\t\t\t<router-link\n\t\t\t\t\t:to=\"{\n\t\t\t\t\t\tname: 'CourseForm',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tcourseName: 'new',\n\t\t\t\t\t\t},\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<Button v-if=\"user.data?.is_moderator\" variant=\"solid\">\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ __('New Course') }}\n\t\t\t\t\t</Button>\n\t\t\t\t</router-link>\n\t\t\t</div>\n\t\t</header>\n\t\t<div class=\"\">\n\t\t\t<Tabs\n\t\t\t\tv-model=\"tabIndex\"\n\t\t\t\ttablistClass=\"overflow-x-visible flex-wrap !gap-3 md:flex-nowrap\"\n\t\t\t\t:tabs=\"makeTabs\"\n\t\t\t>\n\t\t\t\t<template #tab=\"{ tab, selected }\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"group -mb-px flex items-center gap-2 overflow-hidden border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900\"\n\t\t\t\t\t\t\t:class=\"{ 'text-gray-900': selected }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"h-5\" />\n\t\t\t\t\t\t\t{{ __(tab.label) }}\n\t\t\t\t\t\t\t<Badge theme=\"gray\">\n\t\t\t\t\t\t\t\t{{ tab.count }}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template #default=\"{ tab }\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"tab.courses && tab.courses.value.length\"\n\t\t\t\t\t\tclass=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 my-5 mx-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\tv-for=\"course in tab.courses.value\"\n\t\t\t\t\t\t\t:to=\"\n\t\t\t\t\t\t\t\tcourse.membership && course.current_lesson\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tcourseName: course.name,\n\t\t\t\t\t\t\t\t\t\t\t\tchapterNumber: course.current_lesson.split('-')[0],\n\t\t\t\t\t\t\t\t\t\t\t\tlessonNumber: course.current_lesson.split('-')[1],\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: course.membership\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tcourseName: course.name,\n\t\t\t\t\t\t\t\t\t\t\t\tchapterNumber: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tlessonNumber: 1,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\tname: 'CourseDetail',\n\t\t\t\t\t\t\t\t\t\t\tparams: { courseName: course.name },\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CourseCard :course=\"course\" />\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"grid flex-1 place-items-center text-xl font-medium text-gray-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex flex-col items-center justify-center mt-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ __('No {0} courses found').format(tab.label.toLowerCase()) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Tabs>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport {\n\tBreadcrumbs,\n\tTabs,\n\tBadge,\n\tButton,\n\tFormControl,\n\tcreateResource,\n} from 'frappe-ui'\nimport CourseCard from '@/components/CourseCard.vue'\nimport { Plus, Search } from 'lucide-vue-next'\nimport { ref, computed, inject } from 'vue'\nimport { updateDocumentTitle } from '@/utils'\n\nconst user = inject('$user')\nconst searchQuery = ref('')\n\nconst courses = createResource({\n\turl: 'lms.lms.utils.get_courses',\n\tcache: ['courses', user.data?.email],\n\tauto: true,\n})\n\nconst tabIndex = ref(0)\nlet tabs\n\nconst makeTabs = computed(() => {\n\ttabs = []\n\taddToTabs('Live')\n\taddToTabs('New')\n\taddToTabs('Upcoming')\n\n\tif (user.data) {\n\t\taddToTabs('Enrolled')\n\n\t\tif (\n\t\t\tuser.data.is_moderator ||\n\t\t\tuser.data.is_instructor ||\n\t\t\tcourses.data?.created?.length\n\t\t) {\n\t\t\taddToTabs('Created')\n\t\t}\n\n\t\tif (user.data.is_moderator) {\n\t\t\taddToTabs('Under Review')\n\t\t}\n\t}\n\treturn tabs\n})\n\nconst addToTabs = (label) => {\n\tlet courses = getCourses(label.toLowerCase().split(' ').join('_'))\n\ttabs.push({\n\t\tlabel,\n\t\tcourses: computed(() => courses),\n\t\tcount: computed(() => courses.length),\n\t})\n}\n\nconst getCourses = (type) => {\n\tif (searchQuery.value) {\n\t\tlet query = searchQuery.value.toLowerCase()\n\t\treturn courses.data[type].filter(\n\t\t\t(course) =>\n\t\t\t\tcourse.title.toLowerCase().includes(query) ||\n\t\t\t\tcourse.short_introduction.toLowerCase().includes(query) ||\n\t\t\t\tcourse.tags.filter((tag) => tag.toLowerCase().includes(query)).length\n\t\t)\n\t}\n\treturn courses.data[type]\n}\n\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: 'Courses',\n\t\tdescription: 'All Courses divided by categories',\n\t}\n})\n\nupdateDocumentTitle(pageMeta)\n</script>\n"],"names":["user","inject","searchQuery","ref","courses","createResource","_a","tabIndex","tabs","makeTabs","computed","addToTabs","_b","label","getCourses","type","query","course","tag","pageMeta","updateDocumentTitle"],"mappings":"y1BA4HA,MAAMA,EAAOC,EAAO,OAAO,EACrBC,EAAcC,EAAI,EAAE,EAEpBC,EAAUC,EAAe,CAC9B,IAAK,4BACL,MAAO,CAAC,WAAWC,EAAAN,EAAK,OAAL,YAAAM,EAAW,KAAK,EACnC,KAAM,EACP,CAAC,EAEKC,EAAWJ,EAAI,CAAC,EACtB,IAAIK,EAEJ,MAAMC,EAAWC,EAAS,IAAM,SAC/B,OAAAF,EAAO,CAAE,EACTG,EAAU,MAAM,EAChBA,EAAU,KAAK,EACfA,EAAU,UAAU,EAEhBX,EAAK,OACRW,EAAU,UAAU,GAGnBX,EAAK,KAAK,cACVA,EAAK,KAAK,gBACVY,GAAAN,EAAAF,EAAQ,OAAR,YAAAE,EAAc,UAAd,MAAAM,EAAuB,SAEvBD,EAAU,SAAS,EAGhBX,EAAK,KAAK,cACbW,EAAU,cAAc,GAGnBH,CACR,CAAC,EAEKG,EAAaE,GAAU,CAC5B,IAAIT,EAAUU,EAAWD,EAAM,YAAW,EAAG,MAAM,GAAG,EAAE,KAAK,GAAG,CAAC,EACjEL,EAAK,KAAK,CACT,MAAAK,EACA,QAASH,EAAS,IAAMN,CAAO,EAC/B,MAAOM,EAAS,IAAMN,EAAQ,MAAM,CACtC,CAAE,CACF,EAEMU,EAAcC,GAAS,CAC5B,GAAIb,EAAY,MAAO,CACtB,IAAIc,EAAQd,EAAY,MAAM,YAAa,EAC3C,OAAOE,EAAQ,KAAKW,CAAI,EAAE,OACxBE,GACAA,EAAO,MAAM,cAAc,SAASD,CAAK,GACzCC,EAAO,mBAAmB,cAAc,SAASD,CAAK,GACtDC,EAAO,KAAK,OAAQC,GAAQA,EAAI,YAAW,EAAG,SAASF,CAAK,CAAC,EAAE,MAChE,CACD,CACD,OAAOZ,EAAQ,KAAKW,CAAI,CACzB,EAEMI,EAAWT,EAAS,KAClB,CACN,MAAO,UACP,YAAa,mCACb,EACD,EAED,OAAAU,EAAoBD,CAAQ"}