import{d as M,j as p,am as L,x as l,y as i,A as h,B as m,a9 as x,J as n,M as c,I as t,S as N,C as e,H as u,N as k,aa as V,k as $,F as j,K as D,L as C,av as z}from"./frappe-ui-CfOnYHud.js";import{e as O,B as S,d as T,f as w,G as E,u as F}from"./index-5_0ocoxz.js";import{_ as R}from"./CourseCard-SW0zFRjm.js";import{_ as H}from"./DateRange-B4NynQvi.js";import{_ as A}from"./CourseInstructors-CGxRrteV.js";import{_ as G}from"./UserAvatar-NO3477wF.js";import"./ProgressBar-BFhrldIn.js";const I={key:0,class:"shadow rounded-md p-5 lg:w-72"},q={key:0},J={key:1},K={key:2,class:"text-lg font-semibold mb-3"},P={class:"flex items-center mb-3"},Q={class:"flex items-center mb-3"},U={key:3,class:"flex items-center"},W={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(r){const _=M("$user"),a=r,b=p(()=>{var s,d,o,v;return(s=a.batch.data)!=null&&s.seat_count?((d=a.batch.data)==null?void 0:d.seat_count)-((v=(o=a.batch.data)==null?void 0:o.students)==null?void 0:v.length):null}),y=p(()=>{var s,d,o;return(o=(s=a.batch.data)==null?void 0:s.students)==null?void 0:o.includes((d=_.data)==null?void 0:d.name)}),g=p(()=>{var s;return(s=_.data)==null?void 0:s.is_moderator});return(s,d)=>{const o=L("router-link");return r.batch.data?(l(),i("div",I,[r.batch.data.seat_count&&b.value>0?(l(),h(t(N),{key:0,theme:"green",class:"self-start mb-2 float-right"},{default:m(()=>[x(n(b.value)+" ",1),b.value>1?(l(),i("span",q,n(s.__("Seats Left")),1)):b.value==1?(l(),i("span",J,n(s.__("Seat Left")),1)):c("",!0)]),_:1})):r.batch.data.seat_count&&b.value<=0?(l(),h(t(N),{key:1,theme:"red",class:"self-start mb-2 float-right"},{default:m(()=>[x(n(s.__("Sold Out")),1)]),_:1})):c("",!0),r.batch.data.amount?(l(),i("div",K,n(t(O)(r.batch.data.amount,r.batch.data.currency)),1)):c("",!0),e("div",P,[u(t(S),{class:"h-4 w-4 stroke-1.5 mr-2 text-gray-700"}),e("span",null,n(r.batch.data.courses.length)+" "+n(s.__("Courses")),1)]),u(H,{startDate:r.batch.data.start_date,endDate:r.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),e("div",Q,[u(t(T),{class:"h-4 w-4 stroke-1.5 mr-2 text-gray-700"}),e("span",null,n(t(w)(r.batch.data.start_time))+" - "+n(t(w)(r.batch.data.end_time)),1)]),r.batch.data.timezone?(l(),i("div",U,[u(t(E),{class:"h-4 w-4 stroke-1.5 mr-2 text-gray-700"}),e("span",null,n(r.batch.data.timezone),1)])):c("",!0),g.value||y.value?(l(),h(o,{key:4,to:{name:"Batch",params:{batchName:r.batch.data.name}}},{default:m(()=>[u(t(k),{variant:"solid",class:"w-full mt-4"},{default:m(()=>[e("span",null,n(g.value?s.__("Manage Batch"):s.__("Visit Batch")),1)]),_:1})]),_:1},8,["to"])):r.batch.data.paid_batch&&r.batch.data.seats_left?(l(),h(o,{key:5,to:{name:"Billing",params:{type:"batch",name:r.batch.data.name}}},{default:m(()=>[y.value?c("",!0):(l(),h(t(k),{key:0,class:"w-full mt-4",variant:"solid"},{default:m(()=>[e("span",null,n(s.__("Register Now")),1)]),_:1}))]),_:1},8,["to"])):r.batch.data.allow_self_enrollment&&r.batch.data.seats_left?(l(),h(t(k),{key:6,variant:"solid",class:"w-full mt-2"},{default:m(()=>[x(n(s.__("Enroll Now")),1)]),_:1})):c("",!0),g.value?(l(),h(o,{key:7,to:{name:"BatchForm",params:{batchName:r.batch.data.name}}},{default:m(()=>[u(t(k),{class:"w-full mt-2"},{default:m(()=>[e("span",null,n(s.__("Edit")),1)]),_:1})]),_:1},8,["to"])):c("",!0)])):c("",!0)}}},X={key:0,class:""},Y={class:"sticky top-0 z-10 border-b bg-white px-3 py-2.5 sm:px-5"},Z={class:"m-5 pb-10"},tt={class:"text-3xl font-semibold"},at={class:"my-3"},et={class:"flex flex-col gap-2 lg:gap-0 lg:flex-row lg:items-center justify-between lg:w-1/2"},st={class:"flex items-center"},rt={key:0,class:"hidden lg:block"},lt={key:1,class:"hidden lg:block"},nt={class:"flex items-center"},ot={class:"flex avatar-group overlap mt-3"},ct={class:"grid lg:grid-cols-[60%,20%] gap-4 lg:gap-20 mt-10"},dt={class:"order-2 lg:order-none"},it=["innerHTML"],ut={class:"order-1 lg:order-none"},mt={key:0},ht={class:"flex items-center mt-10"},_t={class:"text-2xl font-semibold"},bt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5"},ft={key:0},gt=["innerHTML"],Nt={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(r){M("$user"),V();const _=r,a=$({url:"lms.lms.utils.get_batch_details",cache:["batch",_.batchName],params:{batch:_.batchName},auto:!0}),b=$({url:"lms.lms.utils.get_batch_courses",params:{batch:_.batchName},cache:["batchCourses",_.batchName],auto:!0}),y=p(()=>{var d,o;let s=[{label:"All Batches",route:{name:"Batches"}}];return s.push({label:(d=a==null?void 0:a.data)==null?void 0:d.title,route:{name:"BatchDetail",params:{batchName:(o=a==null?void 0:a.data)==null?void 0:o.name}}}),s}),g=p(()=>{var s,d;return{title:(s=a.data)==null?void 0:s.title,description:(d=a.data)==null?void 0:d.description}});return F(g),(s,d)=>{var v,B;const o=L("router-link");return t(a).data?(l(),i("div",X,[e("header",Y,[u(t(z),{items:y.value},null,8,["items"])]),e("div",Z,[e("div",null,[e("div",tt,n(t(a).data.title),1),e("div",at,n(t(a).data.description),1),e("div",et,[e("div",st,[u(t(S),{class:"h-4 w-4 text-gray-700 mr-2"}),e("span",null,n((B=(v=t(a).data)==null?void 0:v.courses)==null?void 0:B.length)+" "+n(s.__("Courses")),1)]),t(a).data.courses?(l(),i("span",rt,"·")):c("",!0),u(H,{startDate:t(a).data.start_date,endDate:t(a).data.end_date},null,8,["startDate","endDate"]),t(a).data.start_date?(l(),i("span",lt,"·")):c("",!0),e("div",nt,[u(t(T),{class:"h-4 w-4 text-gray-700 mr-2"}),e("span",null,n(t(w)(t(a).data.start_time))+" - "+n(t(w)(t(a).data.end_time)),1)])]),e("div",ot,[e("div",{class:j(["h-6 mr-1",{"avatar-group overlap":t(a).data.instructors.length>1}])},[(l(!0),i(D,null,C(t(a).data.instructors,f=>(l(),h(G,{user:f},null,8,["user"]))),256))],2),u(A,{instructors:t(a).data.instructors},null,8,["instructors"])])]),e("div",ct,[e("div",dt,[e("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-gray-300 prose-th:border-gray-300 prose-td:relative prose-th:relative prose-th:bg-gray-100 prose-sm max-w-none !whitespace-normal mt-6",innerHTML:t(a).data.batch_details},null,8,it)]),e("div",ut,[u(W,{batch:t(a)},null,8,["batch"])])]),t(a).data.courses.length?(l(),i("div",mt,[e("div",ht,[e("div",_t,n(s.__("Courses")),1)]),e("div",bt,[t(a).data.courses?(l(!0),i(D,{key:0},C(t(b).data,f=>(l(),i("div",{key:f.course},[u(o,{to:{name:"CourseDetail",params:{courseName:f.name}}},{default:m(()=>[(l(),h(R,{course:f,key:f.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):c("",!0)]),t(a).data.batch_details_raw?(l(),i("div",ft,[e("div",{innerHTML:t(a).data.batch_details_raw,class:"batch-description"},null,8,gt)])):c("",!0)])):c("",!0)])])):c("",!0)}}};export{Nt as default};
//# sourceMappingURL=BatchDetail-DLtQ8QGU.js.map
