{"version":3,"file":"BatchDetail-DLtQ8QGU.js","sources":["../../../../frontend/src/components/BatchOverlay.vue","../../../../frontend/src/pages/BatchDetail.vue"],"sourcesContent":["<template>\n\t<div v-if=\"batch.data\" class=\"shadow rounded-md p-5 lg:w-72\">\n\t\t<Badge\n\t\t\tv-if=\"batch.data.seat_count && seats_left > 0\"\n\t\t\ttheme=\"green\"\n\t\t\tclass=\"self-start mb-2 float-right\"\n\t\t>\n\t\t\t{{ seats_left }} <span v-if=\"seats_left > 1\">{{ __('Seats Left') }}</span\n\t\t\t><span v-else-if=\"seats_left == 1\">{{ __('Seat Left') }}</span>\n\t\t</Badge>\n\t\t<Badge\n\t\t\tv-else-if=\"batch.data.seat_count && seats_left <= 0\"\n\t\t\ttheme=\"red\"\n\t\t\tclass=\"self-start mb-2 float-right\"\n\t\t>\n\t\t\t{{ __('Sold Out') }}\n\t\t</Badge>\n\t\t<div v-if=\"batch.data.amount\" class=\"text-lg font-semibold mb-3\">\n\t\t\t{{ formatNumberIntoCurrency(batch.data.amount, batch.data.currency) }}\n\t\t</div>\n\t\t<div class=\"flex items-center mb-3\">\n\t\t\t<BookOpen class=\"h-4 w-4 stroke-1.5 mr-2 text-gray-700\" />\n\t\t\t<span> {{ batch.data.courses.length }} {{ __('Courses') }} </span>\n\t\t</div>\n\t\t<DateRange\n\t\t\t:startDate=\"batch.data.start_date\"\n\t\t\t:endDate=\"batch.data.end_date\"\n\t\t\tclass=\"mb-3\"\n\t\t/>\n\t\t<div class=\"flex items-center mb-3\">\n\t\t\t<Clock class=\"h-4 w-4 stroke-1.5 mr-2 text-gray-700\" />\n\t\t\t<span>\n\t\t\t\t{{ formatTime(batch.data.start_time) }} -\n\t\t\t\t{{ formatTime(batch.data.end_time) }}\n\t\t\t</span>\n\t\t</div>\n\t\t<div v-if=\"batch.data.timezone\" class=\"flex items-center\">\n\t\t\t<Globe class=\"h-4 w-4 stroke-1.5 mr-2 text-gray-700\" />\n\t\t\t<span>\n\t\t\t\t{{ batch.data.timezone }}\n\t\t\t</span>\n\t\t</div>\n\t\t<router-link\n\t\t\tv-if=\"isModerator || isStudent\"\n\t\t\t:to=\"{\n\t\t\t\tname: 'Batch',\n\t\t\t\tparams: {\n\t\t\t\t\tbatchName: batch.data.name,\n\t\t\t\t},\n\t\t\t}\"\n\t\t>\n\t\t\t<Button variant=\"solid\" class=\"w-full mt-4\">\n\t\t\t\t<span>\n\t\t\t\t\t{{ isModerator ? __('Manage Batch') : __('Visit Batch') }}\n\t\t\t\t</span>\n\t\t\t</Button>\n\t\t</router-link>\n\t\t<router-link\n\t\t\t:to=\"{\n\t\t\t\tname: 'Billing',\n\t\t\t\tparams: {\n\t\t\t\t\ttype: 'batch',\n\t\t\t\t\tname: batch.data.name,\n\t\t\t\t},\n\t\t\t}\"\n\t\t\tv-else-if=\"batch.data.paid_batch && batch.data.seats_left\"\n\t\t>\n\t\t\t<Button v-if=\"!isStudent\" class=\"w-full mt-4\" variant=\"solid\">\n\t\t\t\t<span>\n\t\t\t\t\t{{ __('Register Now') }}\n\t\t\t\t</span>\n\t\t\t</Button>\n\t\t</router-link>\n\t\t<Button\n\t\t\tvariant=\"solid\"\n\t\t\tclass=\"w-full mt-2\"\n\t\t\tv-else-if=\"batch.data.allow_self_enrollment && batch.data.seats_left\"\n\t\t>\n\t\t\t{{ __('Enroll Now') }}\n\t\t</Button>\n\t\t<router-link\n\t\t\tv-if=\"isModerator\"\n\t\t\t:to=\"{\n\t\t\t\tname: 'BatchForm',\n\t\t\t\tparams: {\n\t\t\t\t\tbatchName: batch.data.name,\n\t\t\t\t},\n\t\t\t}\"\n\t\t>\n\t\t\t<Button class=\"w-full mt-2\">\n\t\t\t\t<span>\n\t\t\t\t\t{{ __('Edit') }}\n\t\t\t\t</span>\n\t\t\t</Button>\n\t\t</router-link>\n\t</div>\n</template>\n<script setup>\nimport { inject, computed } from 'vue'\nimport { Badge, Button } from 'frappe-ui'\nimport { BookOpen, Clock, Globe } from 'lucide-vue-next'\nimport { formatNumberIntoCurrency, formatTime } from '@/utils'\nimport DateRange from '@/components/Common/DateRange.vue'\n\nconst user = inject('$user')\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: Object,\n\t\tdefault: null,\n\t},\n})\n\nconst seats_left = computed(() => {\n\tif (props.batch.data?.seat_count) {\n\t\treturn props.batch.data?.seat_count - props.batch.data?.students?.length\n\t}\n\treturn null\n})\n\nconst isStudent = computed(() => {\n\treturn props.batch.data?.students?.includes(user.data?.name)\n})\n\nconst isModerator = computed(() => {\n\treturn user.data?.is_moderator\n})\n</script>\n","<template>\n\t<div v-if=\"batch.data\" class=\"\">\n\t\t<header class=\"sticky top-0 z-10 border-b bg-white px-3 py-2.5 sm:px-5\">\n\t\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t\t</header>\n\t\t<div class=\"m-5 pb-10\">\n\t\t\t<div>\n\t\t\t\t<div class=\"text-3xl font-semibold\">\n\t\t\t\t\t{{ batch.data.title }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"my-3\">\n\t\t\t\t\t{{ batch.data.description }}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex flex-col gap-2 lg:gap-0 lg:flex-row lg:items-center justify-between lg:w-1/2\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<BookOpen class=\"h-4 w-4 text-gray-700 mr-2\" />\n\t\t\t\t\t\t<span> {{ batch.data?.courses?.length }} {{ __('Courses') }} </span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"hidden lg:block\" v-if=\"batch.data.courses\"\n\t\t\t\t\t\t>&middot;</span\n\t\t\t\t\t>\n\t\t\t\t\t<DateRange\n\t\t\t\t\t\t:startDate=\"batch.data.start_date\"\n\t\t\t\t\t\t:endDate=\"batch.data.end_date\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"hidden lg:block\" v-if=\"batch.data.start_date\"\n\t\t\t\t\t\t>&middot;</span\n\t\t\t\t\t>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<Clock class=\"h-4 w-4 text-gray-700 mr-2\" />\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ formatTime(batch.data.start_time) }} -\n\t\t\t\t\t\t\t{{ formatTime(batch.data.end_time) }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex avatar-group overlap mt-3\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"h-6 mr-1\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'avatar-group overlap': batch.data.instructors.length > 1,\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\tv-for=\"instructor in batch.data.instructors\"\n\t\t\t\t\t\t\t:user=\"instructor\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<CourseInstructors :instructors=\"batch.data.instructors\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"grid lg:grid-cols-[60%,20%] gap-4 lg:gap-20 mt-10\">\n\t\t\t\t<div class=\"order-2 lg:order-none\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-gray-300 prose-th:border-gray-300 prose-td:relative prose-th:relative prose-th:bg-gray-100 prose-sm max-w-none !whitespace-normal mt-6\"\n\t\t\t\t\t\tv-html=\"batch.data.batch_details\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"order-1 lg:order-none\">\n\t\t\t\t\t<BatchOverlay :batch=\"batch\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"batch.data.courses.length\">\n\t\t\t\t<div class=\"flex items-center mt-10\">\n\t\t\t\t\t<div class=\"text-2xl font-semibold\">\n\t\t\t\t\t\t{{ __('Courses') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"batch.data.courses\"\n\t\t\t\t\t\tv-for=\"course in courses.data\"\n\t\t\t\t\t\t:key=\"course.course\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<router-link\n\t\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\t\tname: 'CourseDetail',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tcourseName: course.name,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CourseCard :course=\"course\" :key=\"course.name\" />\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"batch.data.batch_details_raw\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html=\"batch.data.batch_details_raw\"\n\t\t\t\t\t\tclass=\"batch-description\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { computed, inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { BookOpen, Clock } from 'lucide-vue-next'\nimport { formatTime, updateDocumentTitle } from '@/utils'\nimport { Breadcrumbs, createResource } from 'frappe-ui'\nimport CourseCard from '@/components/CourseCard.vue'\nimport BatchOverlay from '@/components/BatchOverlay.vue'\nimport DateRange from '../components/Common/DateRange.vue'\nimport CourseInstructors from '@/components/CourseInstructors.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\n\nconst user = inject('$user')\nconst router = useRouter()\n\nconst props = defineProps({\n\tbatchName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst batch = createResource({\n\turl: 'lms.lms.utils.get_batch_details',\n\tcache: ['batch', props.batchName],\n\tparams: {\n\t\tbatch: props.batchName,\n\t},\n\tauto: true,\n})\n\nconst courses = createResource({\n\turl: 'lms.lms.utils.get_batch_courses',\n\tparams: {\n\t\tbatch: props.batchName,\n\t},\n\tcache: ['batchCourses', props.batchName],\n\tauto: true,\n})\n\nconst breadcrumbs = computed(() => {\n\tlet items = [{ label: 'All Batches', route: { name: 'Batches' } }]\n\titems.push({\n\t\tlabel: batch?.data?.title,\n\t\troute: { name: 'BatchDetail', params: { batchName: batch?.data?.name } },\n\t})\n\treturn items\n})\n\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: batch.data?.title,\n\t\tdescription: batch.data?.description,\n\t}\n})\n\nupdateDocumentTitle(pageMeta)\n</script>\n<style>\n.batch-description p {\n\tmargin-bottom: 1rem;\n\tline-height: 1.7;\n}\n\n.batch-description li {\n\tline-height: 1.7;\n}\n\n.batch-description ol {\n\tlist-style: auto;\n\tmargin: revert;\n\tpadding: revert;\n}\n\n.batch-description strong {\n\tfont-weight: 600;\n\tcolor: theme('colors.gray.900') !important;\n}\n</style>\n"],"names":["user","inject","props","__props","seats_left","computed","_a","_b","_d","_c","isStudent","isModerator","useRouter","batch","createResource","courses","breadcrumbs","items","pageMeta","updateDocumentTitle"],"mappings":"+wBAwGA,MAAMA,EAAOC,EAAO,OAAO,EAErBC,EAAQC,EAORC,EAAaC,EAAS,IAAM,aACjC,OAAIC,EAAAJ,EAAM,MAAM,OAAZ,MAAAI,EAAkB,aACdC,EAAAL,EAAM,MAAM,OAAZ,YAAAK,EAAkB,cAAaC,GAAAC,EAAAP,EAAM,MAAM,OAAZ,YAAAO,EAAkB,WAAlB,YAAAD,EAA4B,QAE5D,IACR,CAAC,EAEKE,EAAYL,EAAS,IAAM,WAChC,OAAOI,GAAAH,EAAAJ,EAAM,MAAM,OAAZ,YAAAI,EAAkB,WAAlB,YAAAG,EAA4B,UAASF,EAAAP,EAAK,OAAL,YAAAO,EAAW,KACxD,CAAC,EAEKI,EAAcN,EAAS,IAAM,OAClC,OAAOC,EAAAN,EAAK,OAAL,YAAAM,EAAW,YACnB,CAAC,i5FChBYL,EAAO,OAAO,EACZW,EAAW,EAE1B,MAAMV,EAAQC,EAORU,EAAQC,EAAe,CAC5B,IAAK,kCACL,MAAO,CAAC,QAASZ,EAAM,SAAS,EAChC,OAAQ,CACP,MAAOA,EAAM,SACb,EACD,KAAM,EACP,CAAC,EAEKa,EAAUD,EAAe,CAC9B,IAAK,kCACL,OAAQ,CACP,MAAOZ,EAAM,SACb,EACD,MAAO,CAAC,eAAgBA,EAAM,SAAS,EACvC,KAAM,EACP,CAAC,EAEKc,EAAcX,EAAS,IAAM,SAClC,IAAIY,EAAQ,CAAC,CAAE,MAAO,cAAe,MAAO,CAAE,KAAM,SAAS,EAAI,EACjE,OAAAA,EAAM,KAAK,CACV,OAAOX,EAAAO,GAAA,YAAAA,EAAO,OAAP,YAAAP,EAAa,MACpB,MAAO,CAAE,KAAM,cAAe,OAAQ,CAAE,WAAWC,EAAAM,GAAA,YAAAA,EAAO,OAAP,YAAAN,EAAa,KAAQ,CAC1E,CAAE,EACMU,CACR,CAAC,EAEKC,EAAWb,EAAS,IAAM,SAC/B,MAAO,CACN,OAAOC,EAAAO,EAAM,OAAN,YAAAP,EAAY,MACnB,aAAaC,EAAAM,EAAM,OAAN,YAAAN,EAAY,WACzB,CACF,CAAC,EAED,OAAAY,EAAoBD,CAAQ"}