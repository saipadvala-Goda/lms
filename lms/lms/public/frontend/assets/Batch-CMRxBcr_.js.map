{"version":3,"file":"Batch-CMRxBcr_.js","sources":["../../../../frontend/src/components/Modals/EvaluationModal.vue","../../../../frontend/src/components/UpcomingEvaluations.vue","../../../../frontend/src/components/Assessments.vue","../../../../frontend/src/components/Modals/BatchCourseModal.vue","../../../../frontend/src/components/BatchCourses.vue","../../../../frontend/src/components/Modals/LiveClassModal.vue","../../../../frontend/src/components/LiveClass.vue","../../../../frontend/src/components/Modals/StudentModal.vue","../../../../frontend/src/components/BatchStudents.vue","../../../../frontend/src/components/Annoucements.vue","../../../../frontend/src/components/Modals/AnnouncementModal.vue","../../../../frontend/src/pages/Batch.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Schedule Evaluation'),\n\t\t\tsize: 'xl',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Submit'),\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => submitEvaluation(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Course') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Select v-model=\"evaluation.course\" :options=\"getCourses()\" />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Date') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<FormControl type=\"date\" v-model=\"evaluation.date\" />\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"slots.data?.length\">\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Select a slot') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"grid grid-cols-2 gap-2\">\n\t\t\t\t\t\t<div v-for=\"slot in slots.data\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"text-base text-center border rounded-md bg-gray-200 p-2 cursor-pointer\"\n\t\t\t\t\t\t\t\t@click=\"saveSlot(slot)\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'border-gray-900': evaluation.start_time == slot.start_time,\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ formatTime(slot.start_time) }} -\n\t\t\t\t\t\t\t\t{{ formatTime(slot.end_time) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-else-if=\"evaluation.course && evaluation.date\"\n\t\t\t\t\tclass=\"text-sm italic text-red-600\"\n\t\t\t\t>\n\t\t\t\t\t{{ __('No slots available for this date.') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, createResource, Select, FormControl } from 'frappe-ui'\nimport { defineModel, reactive, watch, inject } from 'vue'\nimport { createToast, formatTime } from '@/utils/'\n\nconst user = inject('$user')\nconst dayjs = inject('$dayjs')\nconst show = defineModel()\nconst evaluations = defineModel('reloadEvals')\n\nconst props = defineProps({\n\tcourses: {\n\t\ttype: Array,\n\t\tdefault: [],\n\t},\n\tbatch: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\tendDate: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n})\n\nlet evaluation = reactive({\n\tcourse: '',\n\tdate: '',\n\tstart_time: '',\n\tend_time: '',\n\tday: '',\n\tbatch: props.batch,\n\tmember: user.data.name,\n})\n\nconst createEvaluation = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Certificate Request',\n\t\t\t\tbatch_name: values.batch,\n\t\t\t\t...values,\n\t\t\t},\n\t\t}\n\t},\n})\n\nfunction submitEvaluation(close) {\n\tcreateEvaluation.submit(evaluation, {\n\t\tvalidate() {\n\t\t\tif (!evaluation.course) {\n\t\t\t\treturn 'Please select a course.'\n\t\t\t}\n\t\t\tif (!evaluation.date) {\n\t\t\t\treturn 'Please select a date.'\n\t\t\t}\n\t\t\tif (!evaluation.start_time) {\n\t\t\t\treturn 'Please select a slot.'\n\t\t\t}\n\t\t\tif (dayjs(evaluation.date).isBefore(dayjs(), 'day')) {\n\t\t\t\treturn 'Please select a future date.'\n\t\t\t}\n\t\t\tif (dayjs(evaluation.date).isAfter(dayjs(props.endDate), 'day')) {\n\t\t\t\treturn `Please select a date before the end date ${dayjs(\n\t\t\t\t\tprops.endDate\n\t\t\t\t).format('DD MMMM YYYY')}.`\n\t\t\t}\n\t\t},\n\t\tonSuccess() {\n\t\t\tevaluations.value.reload()\n\t\t\tclose()\n\t\t},\n\t\tonError(err) {\n\t\t\tlet message = err.messages?.[0] || err\n\t\t\tlet unavailabilityMessage = message.includes('unavailable')\n\n\t\t\tcreateToast({\n\t\t\t\ttitle: unavailabilityMessage ? 'Evaluator is Unavailable' : 'Error',\n\t\t\t\ttext: message,\n\t\t\t\ticon: unavailabilityMessage ? 'alert-circle' : 'x',\n\t\t\t\ticonClasses: 'bg-yellow-600 text-white rounded-md p-px',\n\t\t\t\tposition: 'top-center',\n\t\t\t\ttimeout: 10,\n\t\t\t})\n\t\t},\n\t})\n}\n\nconst getCourses = () => {\n\tlet courses = []\n\tfor (const course of props.courses) {\n\t\tcourses.push({\n\t\t\tlabel: course.title,\n\t\t\tvalue: course.course,\n\t\t})\n\t}\n\treturn courses\n}\n\nconst slots = createResource({\n\turl: 'lms.lms.doctype.course_evaluator.course_evaluator.get_schedule',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tcourse: values.course,\n\t\t\tdate: values.date,\n\t\t\tbatch: props.batch,\n\t\t}\n\t},\n})\n\nwatch(\n\t() => evaluation.date,\n\t(date) => {\n\t\tevaluation.start_time = ''\n\t\tif (date && evaluation.course) {\n\t\t\tslots.submit(evaluation)\n\t\t}\n\t}\n)\n\nwatch(\n\t() => evaluation.course,\n\t(course) => {\n\t\tevaluation.date = ''\n\t\tevaluation.start_time = ''\n\t\tslots.reset()\n\t}\n)\n\nconst saveSlot = (slot) => {\n\tevaluation.start_time = slot.start_time\n\tevaluation.end_time = slot.end_time\n\tevaluation.day = slot.day\n}\n</script>\n","<template>\n\t<div class=\"mb-10\">\n\t\t<Button v-if=\"isStudent\" @click=\"openEvalModal\" class=\"float-right\">\n\t\t\t{{ __('Schedule Evaluation') }}\n\t\t</Button>\n\t\t<div class=\"text-lg font-semibold mb-4\">\n\t\t\t{{ __('Upcoming Evaluations') }}\n\t\t</div>\n\t\t<div v-if=\"upcoming_evals.data?.length\">\n\t\t\t<div class=\"grid grid-cols-2 gap-4\">\n\t\t\t\t<div v-for=\"evl in upcoming_evals.data\">\n\t\t\t\t\t<div class=\"border rounded-md p-3\">\n\t\t\t\t\t\t<div class=\"font-semibold mb-3\">\n\t\t\t\t\t\t\t{{ evl.course_title }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center mb-2\">\n\t\t\t\t\t\t\t<Calendar class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t\t\t{{ dayjs(evl.date).format('DD MMMM YYYY') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center mb-2\">\n\t\t\t\t\t\t\t<Clock class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t\t\t\t{{ formatTime(evl.start_time) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t<UserCog2 class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t\t\t\t<span class=\"ml-2 font-medium\">\n\t\t\t\t\t\t\t\t{{ evl.evaluator_name }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else class=\"text-sm italic text-gray-600\">\n\t\t\t{{ __('No upcoming evaluations.') }}\n\t\t</div>\n\t</div>\n\t<EvaluationModal\n\t\t:batch=\"batch\"\n\t\t:endDate=\"endDate\"\n\t\t:courses=\"courses\"\n\t\tv-model=\"showEvalModal\"\n\t\tv-model:reloadEvals=\"upcoming_evals\"\n\t/>\n</template>\n<script setup>\nimport { Calendar, Clock, UserCog2 } from 'lucide-vue-next'\nimport { inject, ref } from 'vue'\nimport { formatTime } from '../utils'\nimport { Button, createResource } from 'frappe-ui'\nimport EvaluationModal from '@/components/Modals/EvaluationModal.vue'\n\nconst dayjs = inject('$dayjs')\nconst user = inject('$user')\nconst showEvalModal = ref(false)\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n\tcourses: {\n\t\ttype: Array,\n\t\tdefault: [],\n\t},\n\tisStudent: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n\tendDate: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n})\n\nconst upcoming_evals = createResource({\n\turl: 'lms.lms.utils.get_upcoming_evals',\n\tcache: ['upcoming_evals', user.data.name],\n\tparams: {\n\t\tstudent: user.data.name,\n\t\tcourses: props.courses.map((course) => course.course),\n\t},\n\tauto: true,\n})\n\nfunction openEvalModal() {\n\tshowEvalModal.value = true\n}\n</script>\n","<template>\n\t<div>\n\t\t<div class=\"text-lg font-semibold mb-4\">\n\t\t\t{{ __('Assessments') }}\n\t\t</div>\n\t\t<div v-if=\"assessments.data?.length\">\n\t\t\t<ListView\n\t\t\t\t:columns=\"getAssessmentColumns()\"\n\t\t\t\t:rows=\"assessments.data\"\n\t\t\t\trow-key=\"name\"\n\t\t\t\t:options=\"{\n\t\t\t\t\tselectable: false,\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\tgetRowRoute: (row) => {\n\t\t\t\t\t\tif (row.submission) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: 'AssignmentSubmission',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tassignmentName: row.assessment_name,\n\t\t\t\t\t\t\t\t\tsubmissionName: row.submission.name,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: 'AssignmentSubmission',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tassignmentName: row.assessment_name,\n\t\t\t\t\t\t\t\t\tsubmissionName: 'new',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t</ListView>\n\t\t</div>\n\t\t<div v-else class=\"text-sm italic text-gray-600\">\n\t\t\t{{ __('No Assessments') }}\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { ListView, createResource } from 'frappe-ui'\nimport { inject } from 'vue'\n\nconst user = inject('$user')\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\trows: {\n\t\ttype: Array,\n\t},\n\tcolumns: {\n\t\ttype: Array,\n\t},\n\toptions: {\n\t\ttype: Object,\n\t\tdefault: () => ({\n\t\t\tselectable: true,\n\t\t\ttotalCount: 0,\n\t\t\trowCount: 0,\n\t\t}),\n\t},\n})\n\nconst assessments = createResource({\n\turl: 'lms.lms.utils.get_assessments',\n\tparams: {\n\t\tbatch: props.batch,\n\t},\n\tauto: true,\n})\n\nconst getAssessmentColumns = () => {\n\tlet columns = [\n\t\t{\n\t\t\tlabel: 'Assessment',\n\t\t\tkey: 'title',\n\t\t},\n\t\t{\n\t\t\tlabel: 'Type',\n\t\t\tkey: 'assessment_type',\n\t\t},\n\t]\n\n\tif (!user.data?.is_moderator) {\n\t\tcolumns.push({\n\t\t\tlabel: 'Status/Score',\n\t\t\tkey: 'status',\n\t\t\talign: 'center',\n\t\t})\n\t}\n\treturn columns\n}\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Add a course'),\n\t\t\tsize: 'sm',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __('Submit'),\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => addCourse(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<Link doctype=\"LMS Course\" v-model=\"course\" :label=\"__('Course')\" />\n\t\t\t<Link\n\t\t\t\tdoctype=\"Course Evaluator\"\n\t\t\t\tv-model=\"evaluator\"\n\t\t\t\t:label=\"__('Evaluator')\"\n\t\t\t\tclass=\"mt-4\"\n\t\t\t/>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, createResource } from 'frappe-ui'\nimport { ref, defineModel } from 'vue'\nimport Link from '@/components/Controls/Link.vue'\nimport { showToast } from '@/utils'\n\nconst show = defineModel()\nconst course = ref(null)\nconst evaluator = ref(null)\nconst courses = defineModel('courses')\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n})\n\nconst createBatchCourse = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Batch Course',\n\t\t\t\tparent: props.batch,\n\t\t\t\tparenttype: 'LMS Batch',\n\t\t\t\tparentfield: 'courses',\n\t\t\t\tcourse: course.value,\n\t\t\t\tevaluator: evaluator.value,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst addCourse = (close) => {\n\tcreateBatchCourse.submit(\n\t\t{},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\tcourses.value.reload()\n\t\t\t\tclose()\n\t\t\t\tcourse.value = null\n\t\t\t\tevaluator.value = null\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\tshowToast('Error', err.message[0] || err, 'x')\n\t\t\t},\n\t\t}\n\t)\n}\n</script>\n","<template>\n\t<div>\n\t\t<div class=\"flex items-center justify-between mb-4\">\n\t\t\t<div class=\"text-xl font-semibold\">\n\t\t\t\t{{ __('Courses') }}\n\t\t\t</div>\n\t\t\t<Button\n\t\t\t\tv-if=\"user.data?.is_moderator\"\n\t\t\t\tvariant=\"solid\"\n\t\t\t\t@click=\"openCourseModal()\"\n\t\t\t>\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('Add Course') }}\n\t\t\t</Button>\n\t\t</div>\n\t\t<div v-if=\"courses.data?.length\">\n\t\t\t<ListView\n\t\t\t\t:columns=\"getCoursesColumns()\"\n\t\t\t\t:rows=\"courses.data\"\n\t\t\t\trow-key=\"batch_course\"\n\t\t\t\t:options=\"{\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\tgetRowRoute: (row) => ({\n\t\t\t\t\t\tname: 'CourseDetail',\n\t\t\t\t\t\tparams: { courseName: row.name },\n\t\t\t\t\t}),\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<ListHeader\n\t\t\t\t\tclass=\"mb-2 grid items-center space-x-4 rounded bg-gray-100 p-2\"\n\t\t\t\t>\n\t\t\t\t\t<ListHeaderItem :item=\"item\" v-for=\"item in getCoursesColumns()\">\n\t\t\t\t\t\t<template #prefix=\"{ item }\">\n\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\tv-if=\"item.icon\"\n\t\t\t\t\t\t\t\t:is=\"item.icon\"\n\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1.5 ml-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ListHeaderItem>\n\t\t\t\t</ListHeader>\n\t\t\t\t<ListRows>\n\t\t\t\t\t<ListRow :row=\"row\" v-for=\"row in courses.data\">\n\t\t\t\t\t\t<template #default=\"{ column, item }\">\n\t\t\t\t\t\t\t<ListRowItem :item=\"row[column.key]\" :align=\"column.align\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{{ row[column.key] }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ListRow>\n\t\t\t\t</ListRows>\n\t\t\t\t<ListSelectBanner>\n\t\t\t\t\t<template #actions=\"{ unselectAll, selections }\">\n\t\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t@click=\"removeCourses(selections, unselectAll)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Trash2 class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</ListSelectBanner>\n\t\t\t</ListView>\n\t\t</div>\n\t\t<BatchCourseModal\n\t\t\tv-model=\"showCourseModal\"\n\t\t\t:batch=\"batch\"\n\t\t\tv-model:courses=\"courses\"\n\t\t/>\n\t</div>\n</template>\n<script setup>\nimport { ref, inject } from 'vue'\nimport BatchCourseModal from '@/components/Modals/BatchCourseModal.vue'\nimport {\n\tcreateResource,\n\tButton,\n\tListHeader,\n\tListHeaderItem,\n\tListSelectBanner,\n\tListRow,\n\tListRows,\n\tListView,\n\tListRowItem,\n} from 'frappe-ui'\nimport { Plus, Trash2 } from 'lucide-vue-next'\n\nconst showCourseModal = ref(false)\nconst user = inject('$user')\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst courses = createResource({\n\turl: 'lms.lms.utils.get_batch_courses',\n\tparams: {\n\t\tbatch: props.batch,\n\t},\n\tcache: ['batchCourses', props.batchName],\n\tauto: true,\n})\n\nconst openCourseModal = () => {\n\tshowCourseModal.value = true\n}\n\nconst getCoursesColumns = () => {\n\treturn [\n\t\t{\n\t\t\tlabel: 'Title',\n\t\t\tkey: 'title',\n\t\t\twidth: 2,\n\t\t},\n\t\t{\n\t\t\tlabel: 'Lessons',\n\t\t\tkey: 'lesson_count',\n\t\t\talign: 'right',\n\t\t},\n\t\t{\n\t\t\tlabel: 'Enrollments',\n\t\t\talign: 'right',\n\t\t\tkey: 'enrollment_count',\n\t\t},\n\t]\n}\n\nconst removeCourse = createResource({\n\turl: 'frappe.client.delete',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'Batch Course',\n\t\t\tname: values.course,\n\t\t}\n\t},\n})\n\nconst removeCourses = (selections, unselectAll) => {\n\tselections.forEach(async (course) => {\n\t\tremoveCourse.submit({ course })\n\t})\n\tsetTimeout(() => {\n\t\tcourses.reload()\n\t\tunselectAll()\n\t}, 1000)\n}\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Create a Live Class'),\n\t\t\tsize: 'xl',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => submitLiveClass(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<div class=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tv-model=\"liveClass.title\"\n\t\t\t\t\t\t\t:label=\"__('Title')\"\n\t\t\t\t\t\t\tclass=\"mb-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t:text=\"\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'Time must be in 24 hour format (HH:mm). Example 11:30 or 22:00'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"liveClass.time\"\n\t\t\t\t\t\t\t\ttype=\"time\"\n\t\t\t\t\t\t\t\t:label=\"__('Time')\"\n\t\t\t\t\t\t\t\tclass=\"mb-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"liveClass.timezone\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"getTimezoneOptions()\"\n\t\t\t\t\t\t\t:label=\"__('Timezone')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"liveClass.date\"\n\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\tclass=\"mb-4\"\n\t\t\t\t\t\t\t:label=\"__('Date')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Tooltip :text=\"__('Duration of the live class in minutes')\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tv-model=\"liveClass.duration\"\n\t\t\t\t\t\t\t\t:label=\"__('Duration')\"\n\t\t\t\t\t\t\t\tclass=\"mb-4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"liveClass.auto_recording\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"getRecordingOptions()\"\n\t\t\t\t\t\t\t:label=\"__('Auto Recording')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<FormControl\n\t\t\t\t\tv-model=\"liveClass.description\"\n\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t:label=\"__('Description')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport {\n\tInput,\n\tDatePicker,\n\tSelect,\n\tTextarea,\n\tDialog,\n\tcreateResource,\n\tTooltip,\n\tFormControl,\n} from 'frappe-ui'\nimport { reactive, inject } from 'vue'\nimport { getTimezones, createToast } from '@/utils/'\nimport { Info } from 'lucide-vue-next'\n\nconst liveClasses = defineModel('reloadLiveClasses')\nconst show = defineModel()\nconst user = inject('$user')\nconst dayjs = inject('$dayjs')\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n})\n\nlet liveClass = reactive({\n\ttitle: '',\n\tdescription: '',\n\tdate: '',\n\ttime: '',\n\tduration: '',\n\ttimezone: '',\n\tauto_recording: 'No Recording',\n\tbatch: props.batch,\n\thost: user.data.name,\n})\n\nconst getTimezoneOptions = () => {\n\treturn getTimezones().map((timezone) => {\n\t\treturn {\n\t\t\tlabel: timezone,\n\t\t\tvalue: timezone,\n\t\t}\n\t})\n}\n\nconst getRecordingOptions = () => {\n\treturn [\n\t\t{\n\t\t\tlabel: 'No Recording',\n\t\t\tvalue: 'No Recording',\n\t\t},\n\t\t{\n\t\t\tlabel: 'Local',\n\t\t\tvalue: 'Local',\n\t\t},\n\t\t{\n\t\t\tlabel: 'Cloud',\n\t\t\tvalue: 'Cloud',\n\t\t},\n\t]\n}\n\nconst createLiveClass = createResource({\n\turl: 'lms.lms.doctype.lms_batch.lms_batch.create_live_class',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Live Class',\n\t\t\tbatch_name: values.batch,\n\t\t\t...values,\n\t\t}\n\t},\n})\n\nconst submitLiveClass = (close) => {\n\treturn createLiveClass.submit(liveClass, {\n\t\tvalidate() {\n\t\t\tif (!liveClass.title) {\n\t\t\t\treturn 'Please enter a title.'\n\t\t\t}\n\t\t\tif (!liveClass.date) {\n\t\t\t\treturn 'Please select a date.'\n\t\t\t}\n\t\t\tif (dayjs(liveClass.date).isSameOrBefore(dayjs(), 'day')) {\n\t\t\t\treturn 'Please select a future date.'\n\t\t\t}\n\t\t\tif (!liveClass.time) {\n\t\t\t\treturn 'Please select a time.'\n\t\t\t}\n\t\t\tif (!valideTime()) {\n\t\t\t\treturn 'Please enter a valid time in the format HH:mm.'\n\t\t\t}\n\t\t\tif (!liveClass.duration) {\n\t\t\t\treturn 'Please select a duration.'\n\t\t\t}\n\t\t\tif (!liveClass.timezone) {\n\t\t\t\treturn 'Please select a timezone.'\n\t\t\t}\n\t\t},\n\t\tonSuccess() {\n\t\t\tliveClasses.value.reload()\n\t\t\tclose()\n\t\t},\n\t\tonError(err) {\n\t\t\tcreateToast({\n\t\t\t\ttitle: 'Error',\n\t\t\t\ttext: err.messages?.[0] || err,\n\t\t\t\ticon: 'x',\n\t\t\t\ticonClasses: 'bg-red-600 text-white rounded-md p-px',\n\t\t\t\tposition: 'top-center',\n\t\t\t\ttimeout: 10,\n\t\t\t})\n\t\t},\n\t})\n}\n\nconst valideTime = () => {\n\tlet time = liveClass.time.split(':')\n\tif (time.length != 2) {\n\t\treturn false\n\t}\n\tif (time[0] < 0 || time[0] > 23) {\n\t\treturn false\n\t}\n\tif (time[1] < 0 || time[1] > 59) {\n\t\treturn false\n\t}\n\treturn true\n}\n</script>\n","<template>\n\t<Button\n\t\tv-if=\"user.data.is_moderator\"\n\t\tvariant=\"solid\"\n\t\tclass=\"float-right mb-5\"\n\t\t@click=\"openLiveClassModal\"\n\t>\n\t\t<template #prefix>\n\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t</template>\n\t\t<span>\n\t\t\t{{ __('Add Live Class') }}\n\t\t</span>\n\t</Button>\n\t<div class=\"text-lg font-semibold mb-5\">\n\t\t{{ __('Live Class') }}\n\t</div>\n\t<div v-if=\"liveClasses.data?.length\" class=\"grid grid-cols-2 gap-5\">\n\t\t<div\n\t\t\tv-for=\"cls in liveClasses.data\"\n\t\t\tclass=\"flex flex-col border rounded-md h-full p-3\"\n\t\t>\n\t\t\t<div class=\"font-semibold text-lg mb-4\">\n\t\t\t\t{{ cls.title }}\n\t\t\t</div>\n\t\t\t<div class=\"mb-4\">\n\t\t\t\t{{ cls.description }}\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-2\">\n\t\t\t\t<Calendar class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t{{ dayjs(cls.date).format('DD MMMM YYYY') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-5\">\n\t\t\t\t<Clock class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t<span class=\"ml-2\">\n\t\t\t\t\t{{ formatTime(cls.time) }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center space-x-2 mt-auto\">\n\t\t\t\t<a\n\t\t\t\t\t:href=\"cls.start_url\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"w-1/2 cursor-pointer inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-gray-800 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 focus-visible:ring focus-visible:ring-gray-400 h-7 text-base px-2 rounded\"\n\t\t\t\t>\n\t\t\t\t\t<Monitor class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t{{ __('Start') }}\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\t:href=\"cls.join_url\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"w-1/2 cursor-pointer inline-flex items-center justify-center gap-2 transition-colors focus:outline-none text-gray-800 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 focus-visible:ring focus-visible:ring-gray-400 h-7 text-base px-2 rounded\"\n\t\t\t\t>\n\t\t\t\t\t<Video class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t{{ __('Join') }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div v-else class=\"text-sm italic text-gray-600\">\n\t\t{{ __('No live classes scheduled') }}\n\t</div>\n\t<LiveClassModal\n\t\t:batch=\"props.batch\"\n\t\tv-model=\"showLiveClassModal\"\n\t\tv-model:reloadLiveClasses=\"liveClasses\"\n\t/>\n</template>\n<script setup>\nimport { createListResource, Button } from 'frappe-ui'\nimport { Plus, Clock, Calendar, Video, Monitor } from 'lucide-vue-next'\nimport { inject } from 'vue'\nimport LiveClassModal from '@/components/Modals/LiveClassModal.vue'\nimport { ref } from 'vue'\nimport { formatTime } from '@/utils/'\n\nconst user = inject('$user')\nconst showLiveClassModal = ref(false)\nconst dayjs = inject('$dayjs')\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst liveClasses = createListResource({\n\tdoctype: 'LMS Live Class',\n\tfilters: {\n\t\tbatch_name: props.batch,\n\t\tdate: ['>=', new Date()],\n\t},\n\tfields: [\n\t\t'title',\n\t\t'description',\n\t\t'time',\n\t\t'date',\n\t\t'start_url',\n\t\t'join_url',\n\t\t'owner',\n\t],\n\torderBy: 'date',\n\tauto: true,\n})\n\nconst openLiveClassModal = () => {\n\tshowLiveClassModal.value = true\n}\n</script>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Add a Student'),\n\t\t\tsize: 'sm',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => addStudent(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<Link\n\t\t\t\t\tdoctype=\"User\"\n\t\t\t\t\tv-model=\"student\"\n\t\t\t\t\t:filters=\"{ ignore_user_type: 1 }\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, createResource } from 'frappe-ui'\nimport { ref } from 'vue'\nimport Link from '@/components/Controls/Link.vue'\n\nconst students = defineModel('reloadStudents')\nconst student = ref()\nconst show = defineModel()\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n})\n\nconst studentResource = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'Batch Student',\n\t\t\t\tparent: props.batch,\n\t\t\t\tparenttype: 'LMS Batch',\n\t\t\t\tparentfield: 'students',\n\t\t\t\tstudent: student.value,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst addStudent = (close) => {\n\tstudentResource.submit(\n\t\t{},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\tstudents.value.reload()\n\t\t\t\tclose()\n\t\t\t\tstudent.value = null\n\t\t\t},\n\t\t}\n\t)\n}\n</script>\n","<template>\n\t<Button class=\"float-right mb-3\" variant=\"solid\" @click=\"openStudentModal()\">\n\t\t<template #prefix>\n\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t</template>\n\t\t{{ __('Add Student') }}\n\t</Button>\n\t<div class=\"text-lg font-semibold mb-4\">\n\t\t{{ __('Students') }}\n\t</div>\n\t<div v-if=\"students.data?.length\">\n\t\t<ListView\n\t\t\t:columns=\"getStudentColumns()\"\n\t\t\t:rows=\"students.data\"\n\t\t\trow-key=\"name\"\n\t\t\t:options=\"{ showTooltip: false }\"\n\t\t>\n\t\t\t<ListHeader\n\t\t\t\tclass=\"mb-2 grid items-center space-x-4 rounded bg-gray-100 p-2\"\n\t\t\t>\n\t\t\t\t<ListHeaderItem :item=\"item\" v-for=\"item in getStudentColumns()\">\n\t\t\t\t\t<template #prefix=\"{ item }\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\tv-if=\"item.icon\"\n\t\t\t\t\t\t\t:is=\"item.icon\"\n\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1.5 ml-4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</ListHeaderItem>\n\t\t\t</ListHeader>\n\t\t\t<ListRows>\n\t\t\t\t<ListRow :row=\"row\" v-for=\"row in students.data\">\n\t\t\t\t\t<template #default=\"{ column, item }\">\n\t\t\t\t\t\t<ListRowItem :item=\"row[column.key]\" :align=\"column.align\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<div v-if=\"column.key == 'full_name'\">\n\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center\"\n\t\t\t\t\t\t\t\t\t\t:image=\"row['user_image']\"\n\t\t\t\t\t\t\t\t\t\t:label=\"item\"\n\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ row[column.key] }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t</template>\n\t\t\t\t</ListRow>\n\t\t\t</ListRows>\n\t\t\t<ListSelectBanner>\n\t\t\t\t<template #actions=\"{ unselectAll, selections }\">\n\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t@click=\"removeStudents(selections, unselectAll)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Trash2 class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</ListSelectBanner>\n\t\t</ListView>\n\t</div>\n\t<div v-else class=\"text-sm italic text-gray-600\">\n\t\t{{ __('There are no students in this batch.') }}\n\t</div>\n\t<StudentModal\n\t\t:batch=\"props.batch\"\n\t\tv-model=\"showStudentModal\"\n\t\tv-model:reloadStudents=\"students\"\n\t/>\n</template>\n<script setup>\nimport {\n\tcreateResource,\n\tListHeader,\n\tListHeaderItem,\n\tListSelectBanner,\n\tListRow,\n\tListRows,\n\tListView,\n\tListRowItem,\n\tAvatar,\n\tButton,\n} from 'frappe-ui'\nimport { Trash2, Plus } from 'lucide-vue-next'\nimport { ref } from 'vue'\nimport StudentModal from '@/components/Modals/StudentModal.vue'\n\nconst showStudentModal = ref(false)\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\tdefault: null,\n\t},\n})\n\nconst students = createResource({\n\turl: 'lms.lms.utils.get_batch_students',\n\tcache: ['students', props.batch],\n\tparams: {\n\t\tbatch: props.batch,\n\t},\n\tauto: true,\n})\n\nconst getStudentColumns = () => {\n\treturn [\n\t\t{\n\t\t\tlabel: 'Full Name',\n\t\t\tkey: 'full_name',\n\t\t\twidth: 2,\n\t\t},\n\t\t{\n\t\t\tlabel: 'Courses Done',\n\t\t\tkey: 'courses_completed',\n\t\t\talign: 'center',\n\t\t},\n\t\t{\n\t\t\tlabel: 'Assessments Done',\n\t\t\tkey: 'assessments_completed',\n\t\t\talign: 'center',\n\t\t},\n\t\t{\n\t\t\tlabel: 'Last Active',\n\t\t\tkey: 'last_active',\n\t\t},\n\t]\n}\n\nconst openStudentModal = () => {\n\tshowStudentModal.value = true\n}\n\nconst removeStudent = createResource({\n\turl: 'frappe.client.delete',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'Batch Student',\n\t\t\tname: values.student,\n\t\t}\n\t},\n})\n\nconst removeStudents = (selections, unselectAll) => {\n\tselections.forEach(async (student) => {\n\t\tremoveStudent.submit({ student })\n\t})\n\tsetTimeout(() => {\n\t\tstudents.reload()\n\t\tunselectAll()\n\t}, 500)\n}\n</script>\n","<template>\n\t<div v-if=\"communications.data?.length\">\n\t\t<div v-for=\"comm in communications.data\">\n\t\t\t<div class=\"mb-8\">\n\t\t\t\t<div class=\"flex items-center justify-between mb-2\">\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<Avatar :label=\"comm.sender_full_name\" size=\"lg\" />\n\t\t\t\t\t\t<div class=\"ml-2\">\n\t\t\t\t\t\t\t{{ comm.sender_full_name }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-sm\">\n\t\t\t\t\t\t{{ timeAgo(comm.communication_date) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"prose prose-sm bg-gray-50 !min-w-full px-4 py-2 rounded-md\"\n\t\t\t\t\tv-html=\"comm.content\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div v-else class=\"text-sm italic text-gray-600\">\n\t\t{{ __('No announcements') }}\n\t</div>\n</template>\n<script setup>\nimport { createListResource, Avatar } from 'frappe-ui'\nimport { timeAgo } from '@/utils'\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst communications = createListResource({\n\tdoctype: 'Communication',\n\tfields: [\n\t\t'subject',\n\t\t'content',\n\t\t'recipients',\n\t\t'cc',\n\t\t'communication_date',\n\t\t'sender',\n\t\t'sender_full_name',\n\t],\n\tfilters: {\n\t\treference_doctype: 'LMS Batch',\n\t\treference_name: props.batch,\n\t},\n\torderBy: 'communication_date desc',\n\tauto: true,\n\tcache: ['batch', props.batch],\n})\n</script>\n<style>\n.prose-sm p {\n\tmargin: 0 0 0.5rem;\n}\n</style>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Make an Announcement'),\n\t\t\tsize: 'xl',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Submit',\n\t\t\t\t\tvariant: 'solid',\n\t\t\t\t\tonClick: (close) => makeAnnouncement(close),\n\t\t\t\t},\n\t\t\t],\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"flex flex-col gap-4\">\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Subject') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Input type=\"text\" v-model=\"announcement.subject\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Reply To') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Input type=\"text\" v-model=\"announcement.replyTo\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t<div class=\"mb-1.5 text-sm text-gray-600\">\n\t\t\t\t\t\t{{ __('Announcement') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<TextEditor\n\t\t\t\t\t\t:bubbleMenu=\"true\"\n\t\t\t\t\t\t@change=\"(val) => (announcement.announcement = val)\"\n\t\t\t\t\t\teditorClass=\"prose-sm py-2 px-2 min-h-[200px] border-gray-300 hover:border-gray-400 rounded-md bg-gray-200\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog, Input, TextEditor, createResource } from 'frappe-ui'\nimport { reactive } from 'vue'\nimport { createToast } from '@/utils/'\n\nconst show = defineModel()\n\nconst props = defineProps({\n\tbatch: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tstudents: {\n\t\ttype: Array,\n\t\trequired: true,\n\t},\n})\n\nconst announcement = reactive({\n\tsubject: '',\n\treplyTo: '',\n\tannouncement: '',\n})\n\nconst announcementResource = createResource({\n\turl: 'frappe.core.doctype.communication.email.make',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\trecipients: props.students.join(', '),\n\t\t\tcc: announcement.replyTo,\n\t\t\tsubject: announcement.subject,\n\t\t\tcontent: announcement.announcement,\n\t\t\tdoctype: 'LMS Batch',\n\t\t\tname: props.batch,\n\t\t\tsend_email: 1,\n\t\t}\n\t},\n})\n\nconst makeAnnouncement = (close) => {\n\tannouncementResource.submit(\n\t\t{},\n\t\t{\n\t\t\tvalidate() {\n\t\t\t\tif (!props.students.length) {\n\t\t\t\t\treturn 'No students in this batch'\n\t\t\t\t}\n\t\t\t\tif (!announcement.subject) {\n\t\t\t\t\treturn 'Subject is required'\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\tclose()\n\t\t\t\tcreateToast({\n\t\t\t\t\ttitle: 'Success',\n\t\t\t\t\ttext: 'Announcement has been sent successfully',\n\t\t\t\t\ticon: 'Check',\n\t\t\t\t\ticonClasses: 'bg-green-600 text-white rounded-md p-px',\n\t\t\t\t})\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\tcreateToast({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\ttext: err.messages?.[0] || err,\n\t\t\t\t\ticon: 'x',\n\t\t\t\t\ticonClasses: 'bg-red-600 text-white rounded-md p-px',\n\t\t\t\t\tposition: 'top-center',\n\t\t\t\t\ttimeout: 10,\n\t\t\t\t})\n\t\t\t},\n\t\t}\n\t)\n}\n</script>\n","<template>\n\t<div v-if=\"user.data?.is_moderator || isStudent\" class=\"\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs class=\"h-7\" :items=\"breadcrumbs\" />\n\t\t\t<Button v-if=\"user.data?.is_moderator\" @click=\"openAnnouncementModal()\">\n\t\t\t\t<span>\n\t\t\t\t\t{{ __('Make an Announcement') }}\n\t\t\t\t</span>\n\t\t\t\t<template #suffix>\n\t\t\t\t\t<SendIcon class=\"h-4 stroke-1.5\" />\n\t\t\t\t</template>\n\t\t\t</Button>\n\t\t</header>\n\t\t<div v-if=\"batch.data\" class=\"grid grid-cols-[70%,30%] h-screen\">\n\t\t\t<div class=\"border-r-2\">\n\t\t\t\t<Tabs v-model=\"tabIndex\" :tabs=\"tabs\" tablistClass=\"overflow-y-hidden\">\n\t\t\t\t\t<template #tab=\"{ tab, selected }\" class=\"overflow-x-hidden\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"group -mb-px flex items-center gap-1 border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900\"\n\t\t\t\t\t\t\t\t:class=\"{ 'text-gray-900': selected }\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\tv-if=\"tab.icon\"\n\t\t\t\t\t\t\t\t\t:is=\"tab.icon\"\n\t\t\t\t\t\t\t\t\tclass=\"h-4 stroke-1.5\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{{ __(tab.label) }}\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tv-if=\"tab.count\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'text-gray-900 border border-gray-900': selected,\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\tvariant=\"subtle\"\n\t\t\t\t\t\t\t\t\ttheme=\"gray\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ tab.count }}\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #default=\"{ tab }\">\n\t\t\t\t\t\t<div class=\"pt-5 px-5 pb-10\">\n\t\t\t\t\t\t\t<div v-if=\"tab.label == 'Courses'\">\n\t\t\t\t\t\t\t\t<BatchCourses :batch=\"batch.data.name\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"tab.label == 'Dashboard'\">\n\t\t\t\t\t\t\t\t<BatchDashboard :batch=\"batch\" :isStudent=\"isStudent\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"tab.label == 'Live Class'\">\n\t\t\t\t\t\t\t\t<LiveClass :batch=\"batch.data.name\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"tab.label == 'Students'\">\n\t\t\t\t\t\t\t\t<BatchStudents :batch=\"batch.data.name\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"tab.label == 'Assessments'\">\n\t\t\t\t\t\t\t\t<Assessments :batch=\"batch.data.name\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"tab.label == 'Announcements'\">\n\t\t\t\t\t\t\t\t<Announcements :batch=\"batch.data.name\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"tab.label == 'Discussions'\">\n\t\t\t\t\t\t\t\t<Discussions\n\t\t\t\t\t\t\t\t\tdoctype=\"LMS Batch\"\n\t\t\t\t\t\t\t\t\t:docname=\"batch.data.name\"\n\t\t\t\t\t\t\t\t\t:title=\"__('Discussions')\"\n\t\t\t\t\t\t\t\t\t:key=\"batch.data.name\"\n\t\t\t\t\t\t\t\t\t:singleThread=\"true\"\n\t\t\t\t\t\t\t\t\t:scrollToBottom=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t\t<div class=\"p-5\">\n\t\t\t\t<div class=\"text-2xl font-semibold mb-2\">\n\t\t\t\t\t{{ batch.data.title }}\n\t\t\t\t</div>\n\t\t\t\t<div v-html=\"batch.data.description\" class=\"leading-5 mb-2\"></div>\n\n\t\t\t\t<div class=\"flex avatar-group overlap mb-5\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"h-6 mr-1\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'avatar-group overlap': batch.data.instructors.length > 1,\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\tv-for=\"instructor in batch.data.instructors\"\n\t\t\t\t\t\t\t:user=\"instructor\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<CourseInstructors :instructors=\"batch.data.instructors\" />\n\t\t\t\t</div>\n\t\t\t\t<DateRange\n\t\t\t\t\t:startDate=\"batch.data.start_date\"\n\t\t\t\t\t:endDate=\"batch.data.end_date\"\n\t\t\t\t\tclass=\"mb-3\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"flex items-center mb-4\">\n\t\t\t\t\t<Clock class=\"h-4 w-4 stroke-1.5 mr-2 text-gray-700\" />\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ formatTime(batch.data.start_time) }} -\n\t\t\t\t\t\t{{ formatTime(batch.data.end_time) }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"batch.data.timezone\" class=\"flex items-center mb-4\">\n\t\t\t\t\t<Globe class=\"h-4 w-4 stroke-1.5 mr-2 text-gray-700\" />\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ batch.data.timezone }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<AnnouncementModal\n\t\t\t\tv-model=\"showAnnouncementModal\"\n\t\t\t\t:batch=\"batch.data.name\"\n\t\t\t\t:students=\"batch.data.students\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n\t<div v-else-if=\"!user.data?.name\" class=\"\">\n\t\t<div class=\"text-base border rounded-md w-1/3 mx-auto my-32\">\n\t\t\t<div class=\"border-b px-5 py-3 font-medium\">\n\t\t\t\t<span\n\t\t\t\t\tclass=\"inline-flex items-center before:bg-red-600 before:w-2 before:h-2 before:rounded-md before:mr-2\"\n\t\t\t\t></span>\n\t\t\t\t{{ __('Not Permitted') }}\n\t\t\t</div>\n\t\t\t<div class=\"px-5 py-3\">\n\t\t\t\t<div v-if=\"user.data\" class=\"mb-4 leading-6\">\n\t\t\t\t\t{{\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'You are not a member of this batch. Please checkout our upcoming batches.'\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"mb-4 leading-6\">\n\t\t\t\t\t{{ __('Please login to access this page.') }}\n\t\t\t\t</div>\n\t\t\t\t<router-link\n\t\t\t\t\tv-if=\"user.data\"\n\t\t\t\t\t:to=\"{\n\t\t\t\t\t\tname: 'Batches',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tbatchName: batch.data?.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<Button variant=\"solid\" class=\"w-full\">\n\t\t\t\t\t\t{{ __('Upcoming Batches') }}\n\t\t\t\t\t</Button>\n\t\t\t\t</router-link>\n\t\t\t\t<Button\n\t\t\t\t\tv-else\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t@click=\"redirectToLogin()\"\n\t\t\t\t>\n\t\t\t\t\t{{ __('Login') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport { Breadcrumbs, Button, createResource, Tabs, Badge } from 'frappe-ui'\nimport { computed, inject, ref } from 'vue'\nimport CourseInstructors from '@/components/CourseInstructors.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport {\n\tClock,\n\tLayoutDashboard,\n\tBookOpen,\n\tLaptop,\n\tBookOpenCheck,\n\tContact2,\n\tMail,\n\tSendIcon,\n\tMessageCircle,\n\tGlobe,\n} from 'lucide-vue-next'\nimport { formatTime, updateDocumentTitle } from '@/utils'\nimport BatchDashboard from '@/components/BatchDashboard.vue'\nimport BatchCourses from '@/components/BatchCourses.vue'\nimport LiveClass from '@/components/LiveClass.vue'\nimport BatchStudents from '@/components/BatchStudents.vue'\nimport Assessments from '@/components/Assessments.vue'\nimport Announcements from '@/components/Annoucements.vue'\nimport AnnouncementModal from '@/components/Modals/AnnouncementModal.vue'\nimport Discussions from '@/components/Discussions.vue'\nimport DateRange from '@/components/Common/DateRange.vue'\n\nconst user = inject('$user')\nconst showAnnouncementModal = ref(false)\n\nconst props = defineProps({\n\tbatchName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst batch = createResource({\n\turl: 'lms.lms.utils.get_batch_details',\n\tcache: ['batch', props.batchName],\n\tparams: {\n\t\tbatch: props.batchName,\n\t},\n\tauto: true,\n})\n\nconst breadcrumbs = computed(() => {\n\tlet crumbs = [{ label: 'All Batches', route: { name: 'Batches' } }]\n\tif (!isStudent.value) {\n\t\tcrumbs.push({\n\t\t\tlabel: 'Details',\n\t\t\troute: {\n\t\t\t\tname: 'BatchDetail',\n\t\t\t\tparams: {\n\t\t\t\t\tbatchName: batch.data?.name,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t}\n\tcrumbs.push({\n\t\tlabel: batch?.data?.title,\n\t\troute: { name: 'Batch', params: { batchName: props.batchName } },\n\t})\n\treturn crumbs\n})\n\nconst isStudent = computed(() => {\n\treturn (\n\t\tuser?.data &&\n\t\tbatch.data?.students.length &&\n\t\tbatch.data?.students.includes(user.data.name)\n\t)\n})\n\nconst tabIndex = ref(0)\nconst tabs = computed(() => {\n\tlet batchTabs = []\n\tif (isStudent.value) {\n\t\tbatchTabs.push({\n\t\t\tlabel: 'Dashboard',\n\t\t\ticon: LayoutDashboard,\n\t\t})\n\t}\n\tif (user.data?.is_moderator) {\n\t\tbatchTabs.push({\n\t\t\tlabel: 'Students',\n\t\t\ticon: Contact2,\n\t\t})\n\t\tbatchTabs.push({\n\t\t\tlabel: 'Assessments',\n\t\t\ticon: BookOpenCheck,\n\t\t})\n\t}\n\tbatchTabs.push({\n\t\tlabel: 'Live Class',\n\t\ticon: Laptop,\n\t})\n\tbatchTabs.push({\n\t\tlabel: 'Courses',\n\t\ticon: BookOpen,\n\t})\n\tbatchTabs.push({\n\t\tlabel: 'Announcements',\n\t\ticon: Mail,\n\t})\n\tbatchTabs.push({\n\t\tlabel: 'Discussions',\n\t\ticon: MessageCircle,\n\t})\n\treturn batchTabs\n})\n\nconst redirectToLogin = () => {\n\twindow.location.href = `/login?redirect-to=/batches`\n}\n\nconst openAnnouncementModal = () => {\n\tshowAnnouncementModal.value = true\n}\n\nconst pageMeta = computed(() => {\n\treturn {\n\t\ttitle: batch.data?.title,\n\t\tdescription: batch.data?.description,\n\t}\n})\n\nupdateDocumentTitle(pageMeta)\n</script>\n"],"names":["user","inject","dayjs","show","_useModel","evaluations","__props","props","evaluation","reactive","createEvaluation","createResource","values","__spreadValues","submitEvaluation","close","err","message","_a","unavailabilityMessage","createToast","getCourses","courses","course","slots","watch","date","saveSlot","slot","showEvalModal","ref","upcoming_evals","openEvalModal","assessments","getAssessmentColumns","columns","evaluator","createBatchCourse","addCourse","showToast","showCourseModal","openCourseModal","getCoursesColumns","removeCourse","removeCourses","selections","unselectAll","__async","liveClasses","liveClass","getTimezoneOptions","getTimezones","timezone","getRecordingOptions","createLiveClass","submitLiveClass","valideTime","time","showLiveClassModal","createListResource","openLiveClassModal","students","student","studentResource","addStudent","showStudentModal","getStudentColumns","openStudentModal","removeStudent","removeStudents","communications","announcement","announcementResource","makeAnnouncement","showAnnouncementModal","batch","breadcrumbs","computed","crumbs","isStudent","_b","tabIndex","tabs","batchTabs","LayoutDashboard","Contact2","BookOpenCheck","Laptop","BookOpen","Mail","MessageCircle","redirectToLogin","openAnnouncementModal","pageMeta","updateDocumentTitle"],"mappings":"41DA+DA,MAAMA,EAAOC,EAAO,OAAO,EACrBC,EAAQD,EAAO,QAAQ,EACvBE,EAAOC,gBAAY,EACnBC,EAAcD,EAAWE,EAAC,aAAa,EAEvCC,EAAQD,EAed,IAAIE,EAAaC,EAAS,CACzB,OAAQ,GACR,KAAM,GACN,WAAY,GACZ,SAAU,GACV,IAAK,GACL,MAAOF,EAAM,MACb,OAAQP,EAAK,KAAK,IACnB,CAAC,EAED,MAAMU,EAAmBC,EAAe,CACvC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,IAAKC,EAAA,CACJ,QAAS,0BACT,WAAYD,EAAO,OAChBA,EAEJ,CACD,CACF,CAAC,EAED,SAASE,EAAiBC,EAAO,CAChCL,EAAiB,OAAOF,EAAY,CACnC,UAAW,CACV,GAAI,CAACA,EAAW,OACf,MAAO,0BAER,GAAI,CAACA,EAAW,KACf,MAAO,wBAER,GAAI,CAACA,EAAW,WACf,MAAO,wBAER,GAAIN,EAAMM,EAAW,IAAI,EAAE,SAASN,EAAK,EAAI,KAAK,EACjD,MAAO,+BAER,GAAIA,EAAMM,EAAW,IAAI,EAAE,QAAQN,EAAMK,EAAM,OAAO,EAAG,KAAK,EAC7D,MAAO,4CAA4CL,EAClDK,EAAM,OACX,EAAM,OAAO,cAAc,CAAC,GAEzB,EACD,WAAY,CACXF,EAAY,MAAM,OAAQ,EAC1BU,EAAO,CACP,EACD,QAAQC,EAAK,OACZ,IAAIC,IAAUC,EAAAF,EAAI,WAAJ,YAAAE,EAAe,KAAMF,EAC/BG,EAAwBF,EAAQ,SAAS,aAAa,EAE1DG,EAAY,CACX,MAAOD,EAAwB,2BAA6B,QAC5D,KAAMF,EACN,KAAME,EAAwB,eAAiB,IAC/C,YAAa,2CACb,SAAU,aACV,QAAS,EACb,CAAI,CACD,CACH,CAAE,CACF,CAEA,MAAME,EAAa,IAAM,CACxB,IAAIC,EAAU,CAAE,EAChB,UAAWC,KAAUhB,EAAM,QAC1Be,EAAQ,KAAK,CACZ,MAAOC,EAAO,MACd,MAAOA,EAAO,MACjB,CAAG,EAEF,OAAOD,CACR,EAEME,EAAQb,EAAe,CAC5B,IAAK,iEACL,WAAWC,EAAQ,CAClB,MAAO,CACN,OAAQA,EAAO,OACf,KAAMA,EAAO,KACb,MAAOL,EAAM,KACb,CACD,CACF,CAAC,EAEDkB,GACC,IAAMjB,EAAW,KAChBkB,GAAS,CACTlB,EAAW,WAAa,GACpBkB,GAAQlB,EAAW,QACtBgB,EAAM,OAAOhB,CAAU,CAExB,CACF,EAEAiB,GACC,IAAMjB,EAAW,OAChBe,GAAW,CACXf,EAAW,KAAO,GAClBA,EAAW,WAAa,GACxBgB,EAAM,MAAO,CACb,CACF,EAEA,MAAMG,EAAYC,GAAS,CAC1BpB,EAAW,WAAaoB,EAAK,WAC7BpB,EAAW,SAAWoB,EAAK,SAC3BpB,EAAW,IAAMoB,EAAK,GACvB,8pDCxIA,MAAM1B,EAAQD,EAAO,QAAQ,EACvBD,EAAOC,EAAO,OAAO,EACrB4B,EAAgBC,EAAI,EAAK,EAEzBvB,EAAQD,EAmBRyB,EAAiBpB,EAAe,CACrC,IAAK,mCACL,MAAO,CAAC,iBAAkBX,EAAK,KAAK,IAAI,EACxC,OAAQ,CACP,QAASA,EAAK,KAAK,KACnB,QAASO,EAAM,QAAQ,IAAKgB,GAAWA,EAAO,MAAM,CACpD,EACD,KAAM,EACP,CAAC,EAED,SAASS,GAAgB,CACxBH,EAAc,MAAQ,EACvB,sxCC9CA,MAAM7B,EAAOC,EAAO,OAAO,EAuBrBgC,EAActB,EAAe,CAClC,IAAK,gCACL,OAAQ,CACP,MAxBYL,EAwBC,KACb,EACD,KAAM,EACP,CAAC,EAEK4B,EAAuB,IAAM,OAClC,IAAIC,EAAU,CACb,CACC,MAAO,aACP,IAAK,OACL,EACD,CACC,MAAO,OACP,IAAK,iBACL,CACD,EAED,OAAKjB,EAAAlB,EAAK,OAAL,MAAAkB,EAAW,cACfiB,EAAQ,KAAK,CACZ,MAAO,eACP,IAAK,SACL,MAAO,QACV,CAAG,EAEKA,CACR,klCChEA,MAAMhC,EAAOC,gBAAY,EACnBmB,EAASO,EAAI,IAAI,EACjBM,EAAYN,EAAI,IAAI,EACpBR,EAAUlB,EAAYE,EAAA,SAAS,EAE/BC,EAAQD,EAOR+B,EAAoB1B,EAAe,CACxC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,IAAK,CACJ,QAAS,eACT,OAAQL,EAAM,MACd,WAAY,YACZ,YAAa,UACb,OAAQgB,EAAO,MACf,UAAWa,EAAU,KACrB,CACD,CACD,CACF,CAAC,EAEKE,EAAavB,GAAU,CAC5BsB,EAAkB,OACjB,CAAE,EACF,CACC,WAAY,CACXf,EAAQ,MAAM,OAAQ,EACtBP,EAAO,EACPQ,EAAO,MAAQ,KACfa,EAAU,MAAQ,IAClB,EACD,QAAQpB,EAAK,CACZuB,GAAU,QAASvB,EAAI,QAAQ,CAAC,GAAKA,EAAK,GAAG,CAC7C,CACD,CACD,CACF,4wBCgBA,MAAMwB,EAAkBV,EAAI,EAAK,EAC3B9B,EAAOC,EAAO,OAAO,EAErBM,EAAQD,EAORgB,EAAUX,EAAe,CAC9B,IAAK,kCACL,OAAQ,CACP,MAAOJ,EAAM,KACb,EACD,MAAO,CAAC,eAAgBA,EAAM,SAAS,EACvC,KAAM,EACP,CAAC,EAEKkC,EAAkB,IAAM,CAC7BD,EAAgB,MAAQ,EACzB,EAEME,EAAoB,IAClB,CACN,CACC,MAAO,QACP,IAAK,QACL,MAAO,CACP,EACD,CACC,MAAO,UACP,IAAK,eACL,MAAO,OACP,EACD,CACC,MAAO,cACP,MAAO,QACP,IAAK,kBACL,CACD,EAGIC,EAAehC,EAAe,CACnC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,QAAS,eACT,KAAMA,EAAO,MACb,CACD,CACF,CAAC,EAEKgC,EAAgB,CAACC,EAAYC,IAAgB,CAClDD,EAAW,QAAetB,GAAWwB,EAAA,sBACpCJ,EAAa,OAAO,CAAE,OAAApB,EAAQ,CAChC,EAAE,EACD,WAAW,IAAM,CAChBD,EAAQ,OAAQ,EAChBwB,EAAa,CACb,EAAE,GAAI,CACR,uwDC3DA,MAAME,EAAc5C,EAAYE,EAAA,mBAAmB,EAC7CH,EAAOC,gBAAY,EACnBJ,EAAOC,EAAO,OAAO,EACrBC,EAAQD,EAAO,QAAQ,EAS7B,IAAIgD,EAAYxC,EAAS,CACxB,MAAO,GACP,YAAa,GACb,KAAM,GACN,KAAM,GACN,SAAU,GACV,SAAU,GACV,eAAgB,eAChB,MAfaH,EAeA,MACb,KAAMN,EAAK,KAAK,IACjB,CAAC,EAED,MAAMkD,EAAqB,IACnBC,GAAc,EAAC,IAAKC,IACnB,CACN,MAAOA,EACP,MAAOA,CACP,EACD,EAGIC,EAAsB,IACpB,CACN,CACC,MAAO,eACP,MAAO,cACP,EACD,CACC,MAAO,QACP,MAAO,OACP,EACD,CACC,MAAO,QACP,MAAO,OACP,CACD,EAGIC,EAAkB3C,EAAe,CACtC,IAAK,wDACL,WAAWC,EAAQ,CAClB,OAAOC,EAAA,CACN,QAAS,iBACT,WAAYD,EAAO,OAChBA,EAEJ,CACF,CAAC,EAEK2C,EAAmBxC,GACjBuC,EAAgB,OAAOL,EAAW,CACxC,UAAW,CACV,GAAI,CAACA,EAAU,MACd,MAAO,wBAER,GAAI,CAACA,EAAU,KACd,MAAO,wBAER,GAAI/C,EAAM+C,EAAU,IAAI,EAAE,eAAe/C,EAAK,EAAI,KAAK,EACtD,MAAO,+BAER,GAAI,CAAC+C,EAAU,KACd,MAAO,wBAER,GAAI,CAACO,EAAU,EACd,MAAO,iDAER,GAAI,CAACP,EAAU,SACd,MAAO,4BAER,GAAI,CAACA,EAAU,SACd,MAAO,2BAER,EACD,WAAY,CACXD,EAAY,MAAM,OAAQ,EAC1BjC,EAAO,CACP,EACD,QAAQC,EAAK,OACZI,EAAY,CACX,MAAO,QACP,OAAMF,EAAAF,EAAI,WAAJ,YAAAE,EAAe,KAAMF,EAC3B,KAAM,IACN,YAAa,wCACb,SAAU,aACV,QAAS,EACb,CAAI,CACD,CACH,CAAE,EAGIwC,EAAa,IAAM,CACxB,IAAIC,EAAOR,EAAU,KAAK,MAAM,GAAG,EAOnC,MANI,EAAAQ,EAAK,QAAU,GAGfA,EAAK,CAAC,EAAI,GAAKA,EAAK,CAAC,EAAI,IAGzBA,EAAK,CAAC,EAAI,GAAKA,EAAK,CAAC,EAAI,GAI9B,8qECnIA,MAAMzD,EAAOC,EAAO,OAAO,EACrByD,EAAqB5B,EAAI,EAAK,EAC9B5B,EAAQD,EAAO,QAAQ,EAEvBM,EAAQD,EAOR0C,EAAcW,GAAmB,CACtC,QAAS,iBACT,QAAS,CACR,WAAYpD,EAAM,MAClB,KAAM,CAAC,KAAM,IAAI,IAAM,CACvB,EACD,OAAQ,CACP,QACA,cACA,OACA,OACA,YACA,WACA,OACA,EACD,QAAS,OACT,KAAM,EACP,CAAC,EAEKqD,EAAqB,IAAM,CAChCF,EAAmB,MAAQ,EAC5B,23DC9EA,MAAMG,EAAWzD,EAAYE,EAAA,gBAAgB,EACvCwD,EAAUhC,EAAK,EACf3B,EAAOC,gBAAY,EAEnBG,EAAQD,EAORyD,EAAkBpD,EAAe,CACtC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,IAAK,CACJ,QAAS,gBACT,OAAQL,EAAM,MACd,WAAY,YACZ,YAAa,WACb,QAASuD,EAAQ,KACjB,CACD,CACD,CACF,CAAC,EAEKE,EAAcjD,GAAU,CAC7BgD,EAAgB,OACf,CAAE,EACF,CACC,WAAY,CACXF,EAAS,MAAM,OAAQ,EACvB9C,EAAO,EACP+C,EAAQ,MAAQ,IAChB,CACD,CACD,CACF,qnBCuBA,MAAMG,EAAmBnC,EAAI,EAAK,EAE5BvB,EAAQD,EAORuD,EAAWlD,EAAe,CAC/B,IAAK,mCACL,MAAO,CAAC,WAAYJ,EAAM,KAAK,EAC/B,OAAQ,CACP,MAAOA,EAAM,KACb,EACD,KAAM,EACP,CAAC,EAEK2D,EAAoB,IAClB,CACN,CACC,MAAO,YACP,IAAK,YACL,MAAO,CACP,EACD,CACC,MAAO,eACP,IAAK,oBACL,MAAO,QACP,EACD,CACC,MAAO,mBACP,IAAK,wBACL,MAAO,QACP,EACD,CACC,MAAO,cACP,IAAK,aACL,CACD,EAGIC,EAAmB,IAAM,CAC9BF,EAAiB,MAAQ,EAC1B,EAEMG,EAAgBzD,EAAe,CACpC,IAAK,uBACL,WAAWC,EAAQ,CAClB,MAAO,CACN,QAAS,gBACT,KAAMA,EAAO,OACb,CACD,CACF,CAAC,EAEKyD,EAAiB,CAACxB,EAAYC,IAAgB,CACnDD,EAAW,QAAeiB,GAAYf,EAAA,sBACrCqB,EAAc,OAAO,CAAE,QAAAN,EAAS,CAClC,EAAE,EACD,WAAW,IAAM,CAChBD,EAAS,OAAQ,EACjBf,EAAa,CACb,EAAE,GAAG,CACP,w3DC7HA,MAAMvC,EAAQD,EAORgE,EAAiBX,GAAmB,CACzC,QAAS,gBACT,OAAQ,CACP,UACA,UACA,aACA,KACA,qBACA,SACA,kBACA,EACD,QAAS,CACR,kBAAmB,YACnB,eAAgBpD,EAAM,KACtB,EACD,QAAS,0BACT,KAAM,GACN,MAAO,CAAC,QAASA,EAAM,KAAK,CAC7B,CAAC,m2BCPD,MAAMJ,EAAOC,gBAAY,EAEnBG,EAAQD,EAWRiE,EAAe9D,EAAS,CAC7B,QAAS,GACT,QAAS,GACT,aAAc,EACf,CAAC,EAEK+D,EAAuB7D,EAAe,CAC3C,IAAK,+CACL,WAAWC,EAAQ,CAClB,MAAO,CACN,WAAYL,EAAM,SAAS,KAAK,IAAI,EACpC,GAAIgE,EAAa,QACjB,QAASA,EAAa,QACtB,QAASA,EAAa,aACtB,QAAS,YACT,KAAMhE,EAAM,MACZ,WAAY,CACZ,CACD,CACF,CAAC,EAEKkE,EAAoB1D,GAAU,CACnCyD,EAAqB,OACpB,CAAE,EACF,CACC,UAAW,CACV,GAAI,CAACjE,EAAM,SAAS,OACnB,MAAO,4BAER,GAAI,CAACgE,EAAa,QACjB,MAAO,qBAER,EACD,WAAY,CACXxD,EAAO,EACPK,EAAY,CACX,MAAO,UACP,KAAM,0CACN,KAAM,QACN,YAAa,yCAClB,CAAK,CACD,EACD,QAAQJ,EAAK,OACZI,EAAY,CACX,MAAO,QACP,OAAMF,EAAAF,EAAI,WAAJ,YAAAE,EAAe,KAAMF,EAC3B,KAAM,IACN,YAAa,wCACb,SAAU,aACV,QAAS,EACd,CAAK,CACD,CACD,CACD,CACF,4tDCiFA,MAAMhB,EAAOC,EAAO,OAAO,EACrByE,EAAwB5C,EAAI,EAAK,EAEjCvB,EAAQD,EAORqE,EAAQhE,EAAe,CAC5B,IAAK,kCACL,MAAO,CAAC,QAASJ,EAAM,SAAS,EAChC,OAAQ,CACP,MAAOA,EAAM,SACb,EACD,KAAM,EACP,CAAC,EAEKqE,EAAcC,EAAS,IAAM,SAClC,IAAIC,EAAS,CAAC,CAAE,MAAO,cAAe,MAAO,CAAE,KAAM,SAAS,EAAI,EAClE,OAAKC,EAAU,OACdD,EAAO,KAAK,CACX,MAAO,UACP,MAAO,CACN,KAAM,cACN,OAAQ,CACP,WAAW5D,EAAAyD,EAAM,OAAN,YAAAzD,EAAY,IACvB,CACD,CACJ,CAAG,EAEF4D,EAAO,KAAK,CACX,OAAOE,EAAAL,GAAA,YAAAA,EAAO,OAAP,YAAAK,EAAa,MACpB,MAAO,CAAE,KAAM,QAAS,OAAQ,CAAE,UAAWzE,EAAM,UAAa,CAClE,CAAE,EACMuE,CACR,CAAC,EAEKC,EAAYF,EAAS,IAAM,SAChC,OACC7E,GAAA,YAAAA,EAAM,SACNkB,EAAAyD,EAAM,OAAN,YAAAzD,EAAY,SAAS,WACrB8D,EAAAL,EAAM,OAAN,YAAAK,EAAY,SAAS,SAAShF,EAAK,KAAK,MAE1C,CAAC,EAEKiF,EAAWnD,EAAI,CAAC,EAChBoD,EAAOL,EAAS,IAAM,OAC3B,IAAIM,EAAY,CAAE,EAClB,OAAIJ,EAAU,OACbI,EAAU,KAAK,CACd,MAAO,YACP,KAAMC,EACT,CAAG,GAEElE,EAAAlB,EAAK,OAAL,MAAAkB,EAAW,eACdiE,EAAU,KAAK,CACd,MAAO,WACP,KAAME,EACT,CAAG,EACDF,EAAU,KAAK,CACd,MAAO,cACP,KAAMG,EACT,CAAG,GAEFH,EAAU,KAAK,CACd,MAAO,aACP,KAAMI,EACR,CAAE,EACDJ,EAAU,KAAK,CACd,MAAO,UACP,KAAMK,EACR,CAAE,EACDL,EAAU,KAAK,CACd,MAAO,gBACP,KAAMM,EACR,CAAE,EACDN,EAAU,KAAK,CACd,MAAO,cACP,KAAMO,EACR,CAAE,EACMP,CACR,CAAC,EAEKQ,EAAkB,IAAM,CAC7B,OAAO,SAAS,KAAO,6BACxB,EAEMC,EAAwB,IAAM,CACnClB,EAAsB,MAAQ,EAC/B,EAEMmB,EAAWhB,EAAS,IAAM,SAC/B,MAAO,CACN,OAAO3D,EAAAyD,EAAM,OAAN,YAAAzD,EAAY,MACnB,aAAa8D,EAAAL,EAAM,OAAN,YAAAK,EAAY,WACzB,CACF,CAAC,EAED,OAAAc,GAAoBD,CAAQ"}