import{d as V,r as w,k as $,j as p,am as j,I as r,x as i,y as f,C as o,H as l,B as n,M as h,av as B,R as S,A as x,a9 as y,J as v,N as T,F as D,ab as U,S as F,K as I,L as R,aw as z}from"./frappe-ui-CfOnYHud.js";import{_ as A}from"./CourseCard-SW0zFRjm.js";import{u as E,S as M,P}from"./index-5_0ocoxz.js";import"./UserAvatar-NO3477wF.js";import"./CourseInstructors-CGxRrteV.js";import"./ProgressBar-BFhrldIn.js";const q={key:0},H={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5"},J={class:"flex space-x-2 justify-end"},K={class:"w-36"},Q={class:""},G={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 my-5 mx-5"},O={key:1,class:"grid flex-1 place-items-center text-xl font-medium text-gray-500"},W={class:"flex flex-col items-center justify-center mt-4"},re={__name:"Courses",setup(X){var C;const u=V("$user"),_=w(""),c=$({url:"lms.lms.utils.get_courses",cache:["courses",(C=u.data)==null?void 0:C.email],auto:!0}),b=w(0);let g;const N=p(()=>{var t,s;return g=[],d("Live"),d("New"),d("Upcoming"),u.data&&(d("Enrolled"),(u.data.is_moderator||u.data.is_instructor||(s=(t=c.data)==null?void 0:t.created)!=null&&s.length)&&d("Created"),u.data.is_moderator&&d("Under Review")),g}),d=t=>{let s=k(t.toLowerCase().split(" ").join("_"));g.push({label:t,courses:p(()=>s),count:p(()=>s.length)})},k=t=>{if(_.value){let s=_.value.toLowerCase();return c.data[t].filter(m=>m.title.toLowerCase().includes(s)||m.short_introduction.toLowerCase().includes(s)||m.tags.filter(e=>e.toLowerCase().includes(s)).length)}return c.data[t]},L=p(()=>({title:"Courses",description:"All Courses divided by categories"}));return E(L),(t,s)=>{const m=j("router-link");return r(c).data?(i(),f("div",q,[o("header",H,[l(r(B),{class:"h-7",items:[{label:t.__("Courses"),route:{name:"Courses"}}]},null,8,["items"]),o("div",J,[o("div",K,[l(r(S),{type:"text",placeholder:"Search",modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),onInput:s[1]||(s[1]=e=>r(c).reload())},{prefix:n(()=>[l(r(M),{class:"w-4 h-4 stroke-1.5 text-gray-600",name:"search"})]),_:1},8,["modelValue"])]),l(m,{to:{name:"CourseForm",params:{courseName:"new"}}},{default:n(()=>{var e;return[(e=r(u).data)!=null&&e.is_moderator?(i(),x(r(T),{key:0,variant:"solid"},{prefix:n(()=>[l(r(P),{class:"h-4 w-4"})]),default:n(()=>[y(" "+v(t.__("New Course")),1)]),_:1})):h("",!0)]}),_:1})])]),o("div",Q,[l(r(z),{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=e=>b.value=e),tablistClass:"overflow-x-visible flex-wrap !gap-3 md:flex-nowrap",tabs:N.value},{tab:n(({tab:e,selected:a})=>[o("div",null,[o("button",{class:D(["group -mb-px flex items-center gap-2 overflow-hidden border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900",{"text-gray-900":a}])},[e.icon?(i(),x(U(e.icon),{key:0,class:"h-5"})):h("",!0),y(" "+v(t.__(e.label))+" ",1),l(r(F),{theme:"gray"},{default:n(()=>[y(v(e.count),1)]),_:2},1024)],2)])]),default:n(({tab:e})=>[e.courses&&e.courses.value.length?(i(),f("div",G,[(i(!0),f(I,null,R(e.courses.value,a=>(i(),x(m,{to:a.membership&&a.current_lesson?{name:"Lesson",params:{courseName:a.name,chapterNumber:a.current_lesson.split("-")[0],lessonNumber:a.current_lesson.split("-")[1]}}:a.membership?{name:"Lesson",params:{courseName:a.name,chapterNumber:1,lessonNumber:1}}:{name:"CourseDetail",params:{courseName:a.name}}},{default:n(()=>[l(A,{course:a},null,8,["course"])]),_:2},1032,["to"]))),256))])):(i(),f("div",O,[o("div",W,[o("div",null,v(t.__("No {0} courses found").format(e.label.toLowerCase())),1)])]))]),_:1},8,["modelValue","tabs"])])])):h("",!0)}}};export{re as default};
//# sourceMappingURL=Courses-DERFIDwO.js.map
