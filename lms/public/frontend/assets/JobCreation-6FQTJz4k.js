var z=Object.defineProperty;var V=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var j=(r,m,n)=>m in r?z(r,m,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[m]=n,c=(r,m)=>{for(var n in m||(m={}))I.call(m,n)&&j(r,n,m[n]);if(V)for(var n of V(m))L.call(m,n)&&j(r,n,m[n]);return r};import{d as A,aa as H,k as b,a as M,s as W,j as _,x as g,y as w,C as o,H as i,I as t,B as y,J as d,A as X,av as q,a9 as C,N as k,R as u,aJ as G,aN as K}from"./frappe-ui-CfOnYHud.js";import{k as x,D as Q,H as Y,X as Z}from"./index-5_0ocoxz.js";const ee={class:""},le={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5"},ae={class:"py-5"},oe={class:"container border-b mb-4 pb-4"},se={class:"text-lg font-semibold mb-4"},te={class:"grid grid-cols-2 gap-4"},ne={class:"mt-4"},ie={class:"block text-gray-600 text-xs mb-1"},me={class:"container mb-4 pb-4"},re={class:"text-lg font-semibold mb-4"},de={class:"grid grid-cols-2 gap-4"},ue={class:"block text-gray-600 text-xs mb-1 mt-4"},pe={class:"mb-4"},be={key:1,class:""},ce={class:"flex items-center"},_e={class:"border rounded-md p-2 mr-2"},ge={class:"flex flex-col"},ye={class:"text-sm text-gray-500 mt-1"},je={__name:"JobCreation",props:{jobName:{type:String,default:"new"}},setup(r){const m=A("$user"),n=H(),p=r,J=b({url:"frappe.client.insert",makeParams(e){return{doc:c({doctype:"Job Opportunity",company_logo:a.image.file_url},a)}}}),N=b({url:"frappe.client.set_value",makeParams(e){return{doctype:"Job Opportunity",name:p.jobName,fieldname:c({company_logo:a.image.file_url},a)}}}),f=b({url:"frappe.client.get",makeParams(e){return{doctype:"Job Opportunity",name:p.jobName}},onSuccess(e){Object.keys(e).forEach(l=>{Object.hasOwn(a,l)&&(a[l]=e[l])}),e.company_logo&&T.reload({image:e.company_logo})}}),T=b({url:"lms.lms.api.get_file_info",makeParams(e){return{file_url:e.image}},auto:!1,onSuccess(e){a.image=e}}),a=M({job_title:"",location:"",type:"Full Time",status:"Open",company_name:"",company_website:"",image:null,description:"",company_email_address:""});W(()=>{m.data||(window.location.href="/login"),p.jobName!="new"&&f.reload()});const S=()=>{f.data?F():h()},h=()=>{J.submit({},{onSuccess(e){n.push({name:"JobDetail",params:{job:e.name}})},onError(e){var l;x("Error",((l=e.messages)==null?void 0:l[0])||e,"x")}})},F=()=>{N.submit({},{onSuccess(e){n.push({name:"JobDetail",params:{job:e.name}})},onError(e){var l;x("Error",((l=e.messages)==null?void 0:l[0])||e,"x")}})},O=e=>{a.image=e},U=()=>{a.image=null},D=e=>{let l=e.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png"].includes(l))return"Only image file is allowed."},E=_(()=>[{label:"Full Time",value:"Full Time"},{label:"Part Time",value:"Part Time"},{label:"Contract",value:"Contract"},{label:"Freelance",value:"Freelance"}]),$=_(()=>[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"}]),P=_(()=>[{label:"Jobs",route:{name:"Jobs"}},{label:p.jobName=="new"?"New Job":"Edit Job",route:{name:"JobCreation"}}]);return(e,l)=>(g(),w("div",ee,[o("header",le,[i(t(q),{items:P.value},null,8,["items"]),i(t(k),{variant:"solid",onClick:l[0]||(l[0]=s=>S())},{default:y(()=>[C(d(e.__("Save")),1)]),_:1})]),o("div",ae,[o("div",oe,[o("div",se,d(e.__("Job Details")),1),o("div",te,[o("div",null,[i(t(u),{modelValue:a.job_title,"onUpdate:modelValue":l[1]||(l[1]=s=>a.job_title=s),label:e.__("Title"),class:"mb-4"},null,8,["modelValue","label"]),i(t(u),{modelValue:a.location,"onUpdate:modelValue":l[2]||(l[2]=s=>a.location=s),label:e.__("Location")},null,8,["modelValue","label"])]),o("div",null,[i(t(u),{modelValue:a.type,"onUpdate:modelValue":l[3]||(l[3]=s=>a.type=s),label:e.__("Type"),type:"select",options:E.value,class:"mb-4"},null,8,["modelValue","label","options"]),i(t(u),{modelValue:a.status,"onUpdate:modelValue":l[4]||(l[4]=s=>a.status=s),label:e.__("Status"),type:"select",options:$.value},null,8,["modelValue","label","options"])])]),o("div",ne,[o("label",ie,d(e.__("Description")),1),i(t(G),{content:a.description,onChange:l[5]||(l[5]=s=>a.description=s),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-gray-100 rounded-b-md py-1 px-2 min-h-[7rem] mb-4"},null,8,["content"])])]),o("div",me,[o("div",re,d(e.__("Company Details")),1),o("div",de,[o("div",null,[i(t(u),{modelValue:a.company_name,"onUpdate:modelValue":l[6]||(l[6]=s=>a.company_name=s),label:e.__("Company Name"),class:"mb-4"},null,8,["modelValue","label"]),i(t(u),{modelValue:a.company_website,"onUpdate:modelValue":l[7]||(l[7]=s=>a.company_website=s),label:e.__("Company Website")},null,8,["modelValue","label"])]),o("div",null,[i(t(u),{modelValue:a.company_email_address,"onUpdate:modelValue":l[8]||(l[8]=s=>a.company_email_address=s),label:e.__("Company Email Address"),class:"mb-4"},null,8,["modelValue","label"]),o("label",ue,d(e.__("Company Logo")),1),a.image?(g(),w("div",be,[o("div",ce,[o("div",_e,[i(t(Q),{class:"h-5 w-5 stroke-1.5 text-gray-700"})]),o("div",ge,[o("span",null,d(a.image.file_name),1),o("span",ye,d(t(Y)(a.image.file_size)),1)]),i(t(Z),{onClick:l[10]||(l[10]=s=>U()),class:"bg-gray-200 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(g(),X(t(K),{key:0,fileTypes:["image/*"],validateFile:D,onSuccess:l[9]||(l[9]=s=>O(s))},{default:y(({file:s,progress:B,uploading:v,openFileSelector:R})=>[o("div",pe,[i(t(k),{onClick:R,loading:v},{default:y(()=>[C(d(v?`Uploading ${B}%`:"Upload an image"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])])])])]))}};export{je as default};
//# sourceMappingURL=JobCreation-6FQTJz4k.js.map
